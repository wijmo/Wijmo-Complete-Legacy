/*
 *
 * Wijmo Library 2.2.0
 * http://wijmo.com/
 *
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 * 
 * Dual licensed under the Wijmo Commercial or GNU GPL Version 3 licenses.
 * licensing@wijmo.com
 * http://wijmo.com/license
 *
 *
 **/
(function(a){"use strict";var c=alert,j=window,zc=document,e=parseInt,wc,rc,Ed,Id=[],J=null,xc=true,Z=true,i=0,A=[],H=null,bc=null,C="setButtonDisabled",Jb="setButtonsDisabled",u="setButtonChecked",dd="setButtonsChecked",Kd="form",jd="imagebutton",wd="textarea",Fd="button",Cd="textbox",zd="list",ud="passwordfield",ed="dropdownlist",id="hiddenfield",Hd="radio",sd="checkbox",Nb="insertcol",ec="insertrow",Xb="insertcell",gc="splitcell",N="mergecell",Ob="deletecol",fc="deleterow",Zb="deletecell",fb="justifyleft",ab="justifycenter",bb="justifyright",eb="justifyfull",yd="borders",W="insertorderedlist",V="insertunorderedlist",Ad="outdent",Gd="indent",cc="backcolor",dc="fontcolor",rb="bold",lb="italic",ob="strikethrough",gb="underline",y="subscript",v="superscript",jc="template",Pb="removeformat",kd="insertbreak",Tc="insertparagraph",Oc="insertprintpagebreak",td="inserthorizontalrule",qc="tablebutton",Sb="inserttable",qd="edittable",Wb="wysiwyg",hc="split",ac="code",O="wordwrap",md="fullscreen",D="undo",I="redo",Bd="preview",lc="cleanup",yc="cut",sc="copy",pc="paste",rd="selectall",oc="media",Tb="specialchar",Jd="datetime",tc="find",mc="inspect",vc="save",vd="spelling",Mb="imagebrowser",uc="link",ib="xx-small",jb="x-small",qb="small",nb="medium",pb="large",mb="x-large",hb="xx-large",t="fontname",z="fontsize",ld="blockquote",Yb="insertcode",b="wijmo-wijribbon",Qc=b+"-bigbutton",ub=b+"-dropdownbutton",le=b+"-splitbutton",qf=b+"-list",sf=b+"-save",bf=b+"-save16",tf=b+"-undo",rf=b+"-redo",Te=b+"-preview",Pe=b+"-cleanup",Bf=b+"-cut",mf=b+"-copy",hf=b+"-paste",Be=b+"-selectall",Ne=b+"-bgcolor",ff=b+"-color",lf=b+"-bold",Ze=b+"-italic",De=b+"-underline",cf=b+"-strike",Cf=b+"-sub",Df=b+"-sup",Je=b+"-template",ae=b+"-removeformat",je=b+"-justifyleft",Td=b+"-justifycenter",Zd=b+"-justifyright",ie=b+"-justifyfull",Oe=b+"-borders",Ae=b+"-orderlist",me=b+"-unorderlist",Se=b+"-outdent",Ye=b+"-indent",Qe=b+"-inspect",nf=b+"-find",hd=b+"-table",Ic=b+"-inserttable",Rc=b+"-edittable",xe=b+"-insertcol",ye=b+"-insertrow",qe=b+"-insertcell",Ce=b+"-splitcell",ze=b+"-mergecell",ve=b+"-deletecol",we=b+"-deleterow",pe=b+"-deletecell",he=b+"-insertbreak",Pd=b+"-insertparagraph",Ld=b+"-insertprintpagebreak",He=b+"-inserthr",of=b+"-form",Ke=b+"-textarea",Ue=b+"-textbox",Ie=b+"-password",fe=b+"-hiddenfield",ge=b+"-imagebutton",Xe=b+"-button",Re=b+"-listbox",Xd=b+"-dropdownlist",jf=b+"-radio",Fe=b+"-checkbox",pf=b+"-link",af=b+"-link16",Yd=b+"-imagebrowser",gf=b+"-media",ke=b+"-specialchar",Ge=b+"-datetime",oe=b+"-blockquote",re=b+"-insertcode",gd=b+"-modes",Kc=b+"-designview",Mc=b+"-sourceview",Sc=b+"-splitview",Xc=b+"-wordwrap",Lc=b+"-fullscreen",d="wijmo-wijeditor",ue=d+"-container",bd=d+"-header",Zc=d+"-content",F=d+"-footer",Fc=d+"-pathselector",Jc=d+"-fullscreen",sb=d+"-dialog",If=sb+"-hr",w=sb+"-buttons",n=sb+"-button",g=sb+"-text",l=d+"-imagedlg",Le=l+"-content",Ve=l+"-fields",Qb=l+"-imagefield",kf=l+"-imagelist",Me=l+"-preview",db=l+"-imagesrc",nd=l+"-imagealt",X=l+"-imagewidth",T=l+"-imageheight",od=l+"-css",Ab=l+"-hideimagelist",f=d+"-templatedlg",Ff=f+"-toplabels",xf=f+"-topleftlabel",zf=f+"-toprightlabel",vf=f+"-content",Gf=f+"-templatelist",wf=f+"-preview",yf=f+"-templateinfo",Rb=f+"-nameinfo",Vb=f+"-descriptioninfo",Ef=f+"-fields",L=f+"-name",Y=f+"-description",uf=f+"-buttons",pd=f+"-delete",xd=f+"-save",h=d+"-linkdlg",K=h+"-address",Pc=h+"-linktype",Hb=h+"-anchor",G=h+"-text",S=h+"-target",Ub=h+"-css",M=h+"-src",U=h+"-width",R=h+"-height",tb=h+"-imagecontainer",Ec=h+"-linkicontype",Dd=d+"-codedlg",Yc=Dd+"-source",Wd=Dd+"-sourcelabel",s=d+"-taginsdlg",te=s+"-caption",ne=s+"-taglabel",Nc=s+"-tagtext",Sd=s+"-filterempty",se=s+"-attribs",Q=s+"-attriblist",zb=s+"-innerhtml",Lb=s+"-css",kc=d+"-colordlg",Eb=kc+"-picker",B=kc+"-color",p=d+"-tabledlg",Kb=p+"-rows",Cb=p+"-columns",Ib=p+"-width",Gb=p+"-height",Fb=p+"-border",xb=p+"-cellpadding",yb=p+"-cellspacing",Db=p+"-csstext",E=p+"-bgcolor",o=d+"-previewdlg",ee=o+"-caption",vb=o+"-navigator",Wc=o+"-prev",Vc=o+"-next",Gc=o+"-printall",Hc=o+"-printone",cd=o+"-ok",Ac=o+"-printdocument",Od=o+"-previewiframe",cb=d+"-cleanupdlg",de=cb+"-caption",Vd=cb+"-document",ce=cb+"-actions",nc=d+"-finddlg",ef=nc+"-find",Ee=nc+"-replace",P=d+"-mediadlg",We=P+"-type",fd=P+"-src",ad=P+"-width",Uc=P+"-height",r=d+"-specialchardlg",Ud=r+"-chars",Qd=r+"-preview",Bc=r+"-content",be=r+"-list",wb=r+"_label",Md=r+"-punctuation",Rd=r+"-symbols",Nd=r+"-diacritics",x="wijmo-formatspan",k="."+w+" input:first",q="."+w+" input:last",df="."+w+" input[value='OK']",Bb="."+w+" input[value='Cancel']",Af=["Bold","Italic","UnderLine","StrikeThrough","SubScript","SuperScript","JustifyLeft","JustifyCenter","JustifyRight","JustifyFull","Border","NumberedList","BulletedList","Outdent","Indent"],Dc=["Bold","Italic","Link","BlockQuote","StrikeThrough","InsertDate","InsertImage","NumberedList","BulletedList","InsertCode"],Cc=["Bold","Italic","StrikeThrough","UnderLine","ForeColor","FontSize","Link","InsertImage","NumberedList","BulletedList","BlockQuote"],m={Form:{name:"form",tip:"Form",css:of},Image:{name:"imagebutton",tip:"Image Button",css:ge},TextArea:{name:"textarea",tip:"TextArea",css:Ke},Button:{name:"button",tip:"Button",css:Xe},TextBox:{name:"textbox",tip:"TextBox",css:Ue},List:{name:"list",tip:"ListBox",css:Re},PasswordField:{name:"passwordfield",tip:"Password Field",css:Ie},DropDownList:{name:"dropdownlist",tip:"DropDownList",css:Xd},HiddenField:{name:"hiddenfield",tip:"Hidden Field",css:fe},Radio:{name:"radio",tip:"RadioButton",css:jf},CheckBox:{name:"checkbox",tip:"CheckBox",css:Fe},InsertColumn:{name:"insertcol",tip:"Insert Column",css:xe},InsertRow:{name:"insertrow",tip:"Insert Row",css:ye},InsertCell:{name:"insertcell",tip:"Insert Cell",css:qe},SplitCell:{name:"splitcell",tip:"Split Cell",css:Ce},MergeCell:{name:"mergecell",tip:"Merge Cell",css:ze},DeleteColumn:{name:"deletecol",tip:"Delete Column",css:ve},DeleteRow:{name:"deleterow",tip:"Delete Row",css:we},DeleteCell:{name:"deletecell",tip:"Delete Cell",css:pe},JustifyLeft:{name:"justifyleft",tip:"Justify Left",css:je,grpname:"alignment"},JustifyCenter:{name:"justifycenter",tip:"Justify Center",css:Td,grpname:"alignment"},JustifyRight:{name:"justifyright",tip:"Justify Right",css:Zd,grpname:"alignment"},JustifyFull:{name:"justifyfull",tip:"Justify Full",css:ie,grpname:"alignment"},Border:{name:"borders",tip:"Border",css:Oe},NumberedList:{name:"insertorderedlist",tip:"Numbered List",css:Ae,grpname:"list"},BulletedList:{name:"insertunorderedlist",tip:"Bulleted List",css:me,grpname:"list"},Outdent:{name:"outdent",tip:"Outdent",css:Se,grpname:"block"},Indent:{name:"indent",tip:"Indent",css:Ye,grpname:"block"},BackColor:{name:"backcolor",tip:"Background Color",css:Ne},ForeColor:{name:"fontcolor",tip:"Font Color",css:ff},Bold:{name:"bold",tip:"Bold",css:lf},Italic:{name:"italic",tip:"Italic",css:Ze},StrikeThrough:{name:"strikethrough",tip:"Strikethrough",css:cf},UnderLine:{name:"underline",tip:"Underline",css:De},SubScript:{name:"subscript",tip:"Subscript",css:Cf},SuperScript:{name:"superscript",tip:"Superscript",css:Df},Template:{name:"template",tip:"Template",css:Je},RemoveFormat:{name:"removeformat",tip:"RemoveFormat",css:ae},InsertBreak:{name:"insertbreak",tip:"Insert Break",css:he},InsertParagraph:{name:"insertparagraph",tip:"Insert Paragraph",css:Pd},InsertPrint:{name:"insertprintpagebreak",tip:"Insert Print Page Break",css:Ld},InsertHR:{name:"inserthorizontalrule",tip:"Insert Horizontal Line",css:He},Table:{name:"tablebutton",tip:"Table",css:hd},InsertTable:{name:"inserttable",tip:"Insert Table",css:Ic},EditTable:{name:"edittable",tip:"Edit Table",css:Rc},Wysiwyg:{name:"wysiwyg",tip:"Design View",css:Kc,grpname:"modes"},Split:{name:"split",tip:"Split View",css:Sc,grpname:"modes"},Code:{name:"code",tip:"Source View",css:Mc,grpname:"modes"},Wordwrap:{name:"wordwrap",tip:"Wordwrap",css:Xc},FullScreen:{name:"fullscreen",tip:"Fullscreen",css:Lc},Undo:{name:"undo",tip:"Undo",css:tf},Redo:{name:"redo",tip:"Redo",css:rf},Preview:{name:"preview",tip:"Preview",css:Te},Cleanup:{name:"cleanup",tip:"Clean up",css:Pe},Cut:{name:"cut",tip:"Cut",css:Bf},Copy:{name:"copy",tip:"Copy",css:mf},Paste:{name:"paste",tip:"Paste",css:hf},SelectAll:{name:"selectall",tip:"Select All",css:Be},Media:{name:"media",tip:"Media",css:gf},InsertSpecialChar:{name:"specialchar",tip:"Insert Special Character",css:ke},InsertDate:{name:"datetime",tip:"Insert Date Time",css:Ge},Find:{name:"find",tip:"Find And Replace",css:nf,text:"Find"},Inspect:{name:"inspect",tip:"Tag Inspect",css:Qe,text:"Inspect"},Save:{name:"save",tip:"Form",css:sf,text:"Save"},Spelling:{name:"spelling",tip:"Form",css:""},InsertImage:{name:"imagebrowser",tip:"Image Browser",css:Yd},Link:{name:"link",tip:"Link",css:pf,text:"Link"},FontName:{name:"fontname",tip:"Font Name",css:ub},FontSize:{name:"fontsize",tip:"Font Size",css:ub},BlockQuote:{name:"blockquote",tip:"Block Quote",css:oe},InsertCode:{name:"insertcode",tip:"Insert Code",css:re}},ic=function(){var a=this,b=[];a.append=function(a){b.push(a)};a.toString=function(){return b.join("")};a.dispose=function(){b=null}},Hf=function(a){this.text=a;this.render=function(){return this.text}},kb=function(f,c,d){var b=this,e={br:true,img:true,hr:true,input:true};b.tagName=f||"div";b.attributes=d||{};b.innerText=c||"";b.children=[];if(a.isPlainObject(c)){b.innerText="";b.attributes=c}b._isShortTag=false;if(e[b.tagName]===true)b._isShortTag=true;b.render=function(){var c=new ic,d="";c.append(b._renderBeginTag(b.tagName,b.attributes));b.innerText!==""&&c.append(b.innerText);b.children.length>0&&a.each(b.children,function(b,a){c.append(a.render())});c.append(b._renderEndTag(b.tagName));d=c.toString();c.dispose();return d};b.add=function(a){this.children.push(a)};b._renderBeginTag=function(e,d){var b=new ic,c="";b.append("<");b.append(e);a.each(d,function(c,a){b.append(" ");b.append(c);b.append("=");b.append('"');b.append(a.toString());b.append('"')});if(this._isShortTag)b.append(" ");else b.append(">");c=b.toString();b.dispose();return c};b._renderEndTag=function(c){var a=new ic,b="";if(this._isShortTag)a.append("/>");else{a.append("</");a.append(c);a.append(">")}b=a.toString();a.dispose();return b}};a.widget("wijmo.wijeditor",{options:{fullScreenContainerSelector:"",editorMode:"wysiwyg",fullScreenMode:false,showPathSelector:true,mode:"ribbon",commandButtonClick:null,simpleModeCommands:null,showFooter:true,customContextMenu:true,text:null,textChanged:null,localization:null},_create:function(){var b=this;if(window.wijmoApplyWijTouchUtilEvents)a=window.wijmoApplyWijTouchUtilEvents(a);if(b.element.is("input"))return;b.id_prefix="wijeditor-"+b.element.attr("id")+"-";b.$ribbon=undefined;b.$modes=undefined;b._editorify();b._initElements();j.setTimeout(function(){b.options.disabled&&b._handleDisabledOption(true,b.editor)},40);b._continueSavingInputTextForUndo=false;b.element.is(":hidden")&&b.element.wijAddVisibilityObserver&&b.element.wijAddVisibilityObserver(function(){b.refresh();b.element.wijRemoveVisibilityObserver&&b.element.wijRemoveVisibilityObserver()},"wijeditor")},_createBigButton:function(f,e,c,d){var b=this,a=b._createElement("button",{title:f,name:c,"class":Qc});a.add(b._createDiv(e));a.add(b._createSpan("",d));return a},_createTextButton:function(c,a,b){return this._createElement("button",b,{title:c,name:a})},_createButton:function(f,e,c,d){var b=this,a;if(!d)return b._createElement("button",{title:f,name:c,"class":e});a=b._createElement("button",{title:f,name:c});a.add(b._createSpan(e));a.add(b._createSpan("",d));return a},_createTextRadioButton:function(g,c,b,e,f){var d=this,a=[];a.push(d._createElement("input",{id:c+b,type:"radio",name:e}));a.push(d._createElement("label",f,{"for":c+b,title:g,name:b}));return a},_createImageRadioButton:function(g,c,f,b,e){var d=this,a=[];a.push(d._createElement("input",{id:c+b,type:"radio",name:e}));a.push(d._createElement("label",{"for":c+b,title:g,name:b,"class":f}));return a},_createImageCheckButton:function(f,c,e,b){var d=this,a=[];a.push(d._createElement("input",{id:c+b,type:"checkbox"}));a.push(d._createElement("label",{"for":c+b,title:f,name:b,"class":e}));return a},_createRibbonList:function(){return this._createSpan(qf)},_createDropdownButton:function(f,e,i,h,g){var b=this,c=b._createElement("div",{title:f,"class":ub}),d=b._createElement("ul");c.add(b._createTextButton(f,e,i));c.add(d);a.each(h,function(i,c){var f=b._createElement("li"),h=b._createTextRadioButton(c.tip,g,c.name,e,c.text);a.each(h,function(b,a){f.add(a)});d.add(f)});return c},_createSplitButton:function(e,i,g,h,f){var b=this,c=b._createElement("div",{title:e,"class":le}),d=b._createElement("ul");c.add(b._createBigButton(e,i,g,h));c.add(b._createElement("button",{"class":Qc}));c.add(d);a.each(f,function(e,a){var c=b._createElement("li");c.add(b._createButton(a.tip,a.css,a.name,a.text));d.add(c)});return c},_createButtonByCommand:function(e){var b=this,c,a=m[e],d;if(!a)return;d=a.name;switch(d){case ld:case Kd:case jd:case wd:case Fd:case Cd:case zd:case ud:case ed:case id:case Hd:case sd:case Nb:case ec:case Xb:case gc:case N:case Ob:case fc:case Zb:case Pb:case kd:case Tc:case Oc:case md:case D:case I:case yc:case sc:case pc:case Jd:case O:case cc:case dc:case Bd:case lc:case oc:case Tb:case jc:case Mb:case Yb:case td:case rd:c=b._createButton(a.tip,a.css,d);break;case tc:case mc:c=b._createButton(a.tip,a.css,d,a.text);break;case yd:case y:case v:case rb:case lb:case gb:case ob:c=b._createImageCheckButton(a.tip,b.id_prefix,a.css,d);break;case Wb:case hc:case ac:case fb:case ab:case bb:case eb:case Ad:case Gd:case W:case V:c=b._createImageRadioButton(a.tip,b.id_prefix,a.css,d,a.grpname);break;case qc:c=b._createSplitButton("Table",hd,qc,"Table",[{tip:"Insert Table",css:Ic,name:Sb,text:"Insert"},{tip:"Edit Table",css:Rc,name:qd,text:"Edit"}]);break;case vc:if(b.options.mode==="ribbon")c=b._createBigButton(a.tip,a.css,d,a.text);else c=b._createButton(a.tip,bf,d);break;case uc:if(b.options.mode==="ribbon")c=b._createBigButton(a.tip,a.css,d,a.text);else c=b._createButton(a.tip,af,d);break;case t:c=b._createDropdownButton("Font Name",t,"Font Name",[{tip:"Arial",name:"fn1",text:"Arial"},{tip:"Courier New",name:"fn2",text:"Courier New"},{tip:"Garamond",name:"fn3",text:"Garamond"},{tip:"Tahoma",name:"fn4",text:"Tahoma"},{tip:"Times New Roman",name:"fn5",text:"Times New Roman"},{tip:"Verdana",name:"fn6",text:"Verdana"},{tip:"Wingdings",name:"fn7",text:"Wingdings"}],b.id_prefix);break;case z:c=b._createDropdownButton("Font Size",z,"Font Size",[{tip:"VerySmall",name:"xx-small",text:"VerySmall"},{tip:"Smaller",name:"x-small",text:"Smaller"},{tip:"Small",name:"small",text:"Small"},{tip:"Medium",name:"medium",text:"Medium"},{tip:"Large",name:"large",text:"Large"},{tip:"Larger",name:"x-large",text:"Larger"},{tip:"VeryLarge",name:"xx-large",text:"VeryLarge"}],b.id_prefix)}return c},_createActionGroup:function(){var a=this,c=a._createElement("li"),b=a._createRibbonList();c.add(a._createButtonByCommand("Save"));c.add(b);b.add(a._createButtonByCommand("Undo"));b.add(a._createButtonByCommand("Redo"));b=a._createRibbonList();c.add(b);b.add(a._createButtonByCommand("Preview"));b.add(a._createButtonByCommand("Cleanup"));b=a._createRibbonList();c.add(b);b.add(a._createButtonByCommand("Cut"));b.add(a._createButtonByCommand("Copy"));b.add(a._createButtonByCommand("Paste"));b.add(a._createButtonByCommand("SelectAll"));c.add(a._createElement("div","Actions"));return c},_createFontGroup:function(){var b=this,d=b._createElement("li"),c=b._createRibbonList();d.add(b._createButtonByCommand("FontName"));d.add(b._createButtonByCommand("FontSize"));d.add(c);c.add(b._createButtonByCommand("BackColor"));c.add(b._createButtonByCommand("ForeColor"));c=b._createRibbonList();d.add(c);a.each(b._createButtonByCommand("Bold"),function(b,a){c.add(a)});a.each(b._createButtonByCommand("Italic"),function(b,a){c.add(a)});a.each(b._createButtonByCommand("UnderLine"),function(b,a){c.add(a)});a.each(b._createButtonByCommand("StrikeThrough"),function(b,a){c.add(a)});a.each(b._createButtonByCommand("SubScript"),function(b,a){c.add(a)});a.each(b._createButtonByCommand("SuperScript"),function(b,a){c.add(a)});c=b._createRibbonList();d.add(c);c.add(b._createButtonByCommand("Template"));c=b._createRibbonList();d.add(c);c.add(b._createButtonByCommand("RemoveFormat"));d.add(b._createElement("div","Font"));return d},_createParaGroup:function(){var c=this,d=c._createElement("li"),b=c._createRibbonList();d.add(b);a.each(c._createButtonByCommand("JustifyLeft"),function(c,a){b.add(a)});a.each(c._createButtonByCommand("JustifyCenter"),function(c,a){b.add(a)});a.each(c._createButtonByCommand("JustifyRight"),function(c,a){b.add(a)});a.each(c._createButtonByCommand("JustifyFull"),function(c,a){b.add(a)});b=c._createRibbonList();d.add(b);a.each(c._createButtonByCommand("Border"),function(c,a){b.add(a)});b=c._createRibbonList();d.add(b);a.each(c._createButtonByCommand("NumberedList"),function(c,a){b.add(a)});a.each(c._createButtonByCommand("BulletedList"),function(c,a){b.add(a)});b=c._createRibbonList();d.add(b);a.each(c._createButtonByCommand("Outdent"),function(c,a){b.add(a)});a.each(c._createButtonByCommand("Indent"),function(c,a){b.add(a)});d.add(c._createElement("div","Paragraph"));return d},_createReviewGroup:function(){var b=this,a=b._createElement("li");a.add(b._createButtonByCommand("Inspect"));a.add(b._createButtonByCommand("Find"));a.add(b._createElement("div","Review"));return a},_createTablesGroup:function(){var a=this,c=a._createElement("li"),b=a._createRibbonList();c.add(a._createButtonByCommand("Table"));c.add(b);b.add(a._createButtonByCommand("InsertColumn"));b.add(a._createButtonByCommand("InsertRow"));b.add(a._createButtonByCommand("InsertCell"));b=a._createRibbonList();c.add(b);b.add(a._createButtonByCommand("SplitCell"));b.add(a._createButtonByCommand("MergeCell"));b=a._createRibbonList();c.add(b);b.add(a._createButtonByCommand("DeleteColumn"));b.add(a._createButtonByCommand("DeleteRow"));b.add(a._createButtonByCommand("DeleteCell"));c.add(a._createElement("div","Tables"));return c},_createBreaksGroup:function(){var b=this,a=b._createElement("li");a.add(b._createButtonByCommand("InsertBreak"));a.add(b._createButtonByCommand("InsertParagraph"));a.add(b._createButtonByCommand("InsertPrint"));a.add(b._createButtonByCommand("InsertHR"));a.add(b._createElement("div","Breaks"));return a},_createFormsGroup:function(){var b=this,c=b._createElement("li"),a=b._createRibbonList();c.add(a);a.add(b._createButtonByCommand("Form"));a=b._createRibbonList();c.add(a);a.add(b._createButtonByCommand("TextArea"));a.add(b._createButtonByCommand("TextBox"));a.add(b._createButtonByCommand("PasswordField"));a.add(b._createButtonByCommand("HiddenField"));a=b._createRibbonList();c.add(a);a.add(b._createButtonByCommand("Image"));a.add(b._createButtonByCommand("Button"));a=b._createRibbonList();c.add(a);a.add(b._createButtonByCommand("List"));a.add(b._createButtonByCommand("DropDownList"));a.add(b._createButtonByCommand("Radio"));a.add(b._createButtonByCommand("CheckBox"));c.add(b._createElement("div","Forms"));return c},_createSpecialGroup:function(){var b=this,a=b._createElement("li");a.add(b._createButtonByCommand("Link"));a.add(b._createButtonByCommand("InsertImage"));a.add(b._createButtonByCommand("Media"));a.add(b._createButtonByCommand("InsertSpecialChar"));a.add(b._createButtonByCommand("InsertDate"));a.add(b._createElement("div","Special"));return a},_getDefaultRibbonMarkup:function(){var a=this,d=a._createElement("div"),e=a._createElement("ul"),g=a._createElement("li"),i=a._createElement("li"),f=a._createElement("div",{id:a.id_prefix+"format"}),h=a._createElement("div",{id:a.id_prefix+"insert"}),b=a._createElement("ul"),c=a._createElement("ul");d.add(e);d.add(f);d.add(h);e.add(g);e.add(i);g.add(a._createElement("a","Format",{href:"#"+a.id_prefix+"format"}));i.add(a._createElement("a","Insert",{href:"#"+a.id_prefix+"insert"}));f.add(b);b.add(a._createActionGroup());b.add(a._createFontGroup());b.add(a._createParaGroup());b.add(a._createReviewGroup());h.add(c);c.add(a._createTablesGroup());c.add(a._createBreaksGroup());c.add(a._createFormsGroup());c.add(a._createSpecialGroup());return d.render()},_getRibbonModesMarkup:function(){var b=this,f=b._createDiv(gd),e=b._createRibbonList(),c=b.element.find(".wijeditor-footer"),d,g,h,j,i;if(c.length>0){d=a(c.find("."+Kc));if(d.length>0)m.Wysiwyg.tip=d.attr("title")||m.Wysiwyg.tip;g=a(c.find("."+Sc));if(g.length>0)m.Split.tip=g.attr("title")||m.Split.tip;h=a(c.find("."+Mc));if(h.length>0)m.Code.tip=h.attr("title")||m.Code.tip;j=a(c.find("."+Xc));if(d.length>0)m.Wordwrap.tip=j.attr("title")||m.Wordwrap.tip;i=a(c.find("."+Lc));if(d.length>0)m.FullScreen.tip=i.attr("title")||m.FullScreen.tip;c.remove()}f.add(e);a.each(b._createButtonByCommand("Wysiwyg"),function(b,a){e.add(a)});a.each(b._createButtonByCommand("Code"),function(b,a){e.add(a)});a.each(b._createButtonByCommand("Split"),function(b,a){e.add(a)});f.add(b._createButtonByCommand("Wordwrap"));f.add(b._createButtonByCommand("FullScreen"));return f.render()},_getSimpleToolBar:function(e){var d=this,b,c=d._createDiv("");a.each(e,function(f,e){b=d._createButtonByCommand(e);if(b)if(a.inArray(e,Af)!==-1)a.each(b,function(b,a){c.add(a)});else c.add(b)});return c.render()},_editorify:function(){var b=this,e=b.element,o=e.width(),n=e.height(),c=b.options,m=c.mode,g,i,l,j,h,f,k;b._oriStyle=e.attr("style");b._oriContent=e.html();if(e.is("textarea")){if(m==="ribbon")b.$ribbon=a(b._getDefaultRibbonMarkup());else if(m==="bbcode")b.$ribbon=a(b._getSimpleToolBar(Cc));else if(c.simpleModeCommands&&c.simpleModeCommands.length!==0){l=a.grep(c.simpleModeCommands,function(a){return a!=="Table"});b.$ribbon=a(b._getSimpleToolBar(l))}else b.$ribbon=a(b._getSimpleToolBar(Dc));c.text&&e.val(c.text);b.sourceView=e;b.editor=e.wrap("<div></div>").parent();b.editor.width(o).height(n)}else{b.editor=e;b.$ribbon=e.children(":eq(0)");f=e.children(":eq(1)");if(f.is("textarea")){c.text&&f.val(c.text);b.sourceView=f}else{if(c.text)k=c.text;else k=f.html();f.remove();b.sourceView=a("<textarea></textarea>").val(k)}}g=a("<div class='"+ue+"'></div>");b.dialog=a("<div class ='"+d+"'></div>");b.subDialog=a("<div class ='"+d+"'></div>");b.editor.addClass(d).append(g).append(b.dialog).append(b.subDialog);b._createMenuMarkUp(b,c);b.$ribbon.wrap("<a href='#'></a>").parent().appendTo("<div class='"+bd+" ui-widget-header ui-helper-clearfix ui-corner-top'></div>").parent().appendTo(g);i=a("<div class='"+Zc+"'></div>").appendTo(g);b.designView=a("<iframe frameborder='0'></iframe>");b.designView.wrap("<div></div>").parent().appendTo(i);b.sourceView.wrap("<div></div>").parent().appendTo(i);j=[b.$ribbon];b.$modes=a(b._getRibbonModesMarkup());if(c.showFooter){h=a("<div class='"+F+" ui-widget ui-widget-content ui-state-default'></div>");g.append(h);h.append("<div class='"+Fc+"'></div>");b.$modes.appendTo(h);j.push(b.$modes)}a.each(j,function(c,a){a.wijribbon({click:function(c,a){b._ribbonCommand(a.commandName,a.name);b._trigger("commandButtonClick",c,a)}})})},_createMenuMarkUp:function(b,c){if(c.customContextMenu&&!a.browser.webkit){b.contextMenu=a("<ul><li _c1buttoncmd='cut'><a>"+this.localizeString("contextMenuCut","Cut")+"</a></li><li _c1buttoncmd='copy'><a>"+this.localizeString("contextMenuCopy","Copy")+"</a></li><li _c1buttoncmd='paste'><a>"+this.localizeString("contextMenuPaste","Paste")+"</a></li></ul>");a("<a href='#'></a>").append(b.contextMenu).appendTo(b.editor)}},_handleDisabledOption:function(b,c){var a=this;if(b){if(!a.disabledDiv)a.disabledDiv=a._createDisabledDiv(c);a.disabledDiv.appendTo("body")}else if(a.disabledDiv){a.disabledDiv.remove();a.disabledDiv=null}},_createDisabledDiv:function(d){var g=this,b=d?d:g.element,c=b.offset(),f=b.outerWidth(),e=b.outerHeight();return a("<div></div>").addClass("ui-state-disabled").css({"z-index":"99999",position:"absolute","background-color":"lightgray",width:f,height:e,left:c.left,top:c.top})},_initElements:function(){var a=this,b=a.options,d=a.element.height()-a._getHeader().outerHeight(true)-a._getFooter().outerHeight(true),c={};a._getContent().height(d).wijsplitter({showExpander:false,orientation:"horizontal",panel1:{scrollBars:"none",collapsed:false},panel2:{scrollBars:"none",collapsed:true}});a._addHandlerToDesignView();a._addDefaultFontStyleToDesignView();a._createWijMenu();(!b.showPathSelector||a.options.mode==="bbcode")&&a._getPathSelector().hide();a._ribbonCommand(b.editorMode);b.fullScreenMode&&a._setFullScreen(b.fullScreenMode);c[I]=true;c[D]=true;a.$ribbon.wijribbon(Jb,c)},_setOption:function(d,c){var b=this,e=b.options,h=e.mode,g=b.$ribbon.parent(),f=e.customContextMenu;a.Widget.prototype._setOption.apply(b,arguments);if(d==="fullScreenMode"){e.fullScreenMode=c;b._setFullScreen(c)}else if(d==="showPathSelector"){e.showPathSelector=c;if(c)b._getPathSelector().show();else b._getPathSelector().hide()}else if(d==="editorMode"){e.editorMode=c;b._ribbonCommand(c)}else if(d==="fullScreenContainerSelector"){e.fullScreenContainerSelector=c;b.options.fullScreenMode&&b._setFullScreen(true)}else if(d==="disabled")b._handleDisabledOption(c,b.editor);else if(d==="showFooter")if(c)!a("."+F).is(":visible")&&a("."+F).show();else a("."+F).is(":visible")&&a("."+F).hide();else if(d==="commandButtonClick")e.commandButtonClick=c;else if(d==="text"){e.text=c;b.setText(c)}else if(d==="customContextMenu"){if(f===c)return;if(c){!b.contextMenu&&b._createMenuMarkUp(b,e);b._createWijMenu()}else{b.contextMenu.wijmenu("destroy").remove();b.contextMenu=undefined}}else if(d==="mode"&&c!==h){b.$ribbon.wijribbon("destroy");b.$ribbon.remove();if(c==="ribbon")b.$ribbon=a(b._getDefaultRibbonMarkup());else if(c==="bbcode")b.$ribbon=a(b._getSimpleToolBar(Cc));else b.$ribbon=a(b._getSimpleToolBar(Dc));g.append(b.$ribbon);b.$ribbon.wijribbon({click:function(c,a){b._ribbonCommand(a.commandName,a.name);b._trigger("commandButtonClick",c,a)}})}},_getHeader:function(){return a("."+bd,this.editor)},_getContent:function(){return a("."+Zc,this.editor)},_getFooter:function(){return a("."+F,this.editor)},_getPathSelector:function(){return a("."+Fc,this.editor)},_getModes:function(){return a("."+gd,this.editor)},_getDesignView:function(){return this.designView},_getDesignViewWindow:function(){var a=this.designView;return a&&a.length>0?a[0].contentWindow:null},_getDesignViewDocument:function(){var a=this._getDesignViewWindow();return a?a.document:null},_getDesignViewText:function(){var a=this._getDesignViewDocument();return a&&a.body&&a.body.innerHTML?a.body.innerHTML:""},_setDesignViewText:function(a){var c=this,b=this._getDesignViewDocument();if(this.options.mode==="bbcode")a=c._convertBBCodeToHtml(a);if(b&&b.body)b.body.innerHTML=a;c.options.text=a},_getDialog:function(){return this.dialog},_getSubDialog:function(){return this.subDialog},_initContentDocument:function(){var b=this,c=b.sourceView.val(),d=b._getDesignViewDocument();if(b.options.mode==="bbcode")c=b._convertBBCodeToHtml(a.trim(c));d.open();d.write('<html style="width:100%;height:100%;'+(b.options.enabled?"cursor:text;":"")+'"><head><title></title><style id="__wijStyle"  type="text/css" >table,td,tr{border: 1px #acacac dashed;}</style></head><body>'+c+"</body></html>");d.close();A=[];A.push(c);i=0},_addHandlerToDesignView:function(){var b=this,d=b._getDesignViewWindow(),c=d.document;b._initContentDocument();if(a.browser.mozilla)setTimeout(b._setDesignModeForFF,1e3,b);else b._setContentEditable(c,true);b.sourceView.bind("blur."+b.widgetName,function(){b._onSourceViewBlur()});b.sourceView.bind("keyup."+b.widgetName,function(){b._onSourceViewBlur()});if(!a.browser.mozilla)a(d).blur(function(a){b._onDesignViewBlur(a)});else a(c).bind("blur."+b.widgetName,function(a){b._onDesignViewBlur(a)});a(c).bind("mouseup."+b.widgetName,function(a){b._onDesignViewMouseUp(a)}).bind("keydown."+b.widgetName,function(a){b._onDesignViewKeyDown(a)}).bind("keyup."+b.widgetName,function(a){b._onDesignViewKeyUp(a);b._onDesignViewBlur(a)})},_addDefaultFontStyleToDesignView:function(){var e=this,f=e.options,g=e._getDesignViewDocument(),b=f.defaultFontName,d=f.defaultFontSize,c='<style type="text/css"> body {';if((b===""||b===null)&&(d===""||d===null))return;if(b!==""&&b!==null)c+="font-family: "+b+";";if(f.defaultFontSize!==""&&f.defaultFontSize!==null)c+=" font-size: "+d+";";c+="}</style>";window.setTimeout(function(){a(c).appendTo(a("head",g))},200);e._setFontStyleButtonState(b,t);e._setFontStyleButtonState(d,z)},_setFontStyleButtonState:function(b,d){var c="";if(!b||b===null)return;a.each(this.$ribbon.wijribbon("getDropdownList",d),function(d,a){if(a.toUpperCase()===b.toUpperCase()){c=d;return false}});this.$ribbon.wijribbon(u,c,true,d)},_setDesignModeForFF:function(a){a._getDesignViewDocument().designMode="on"},destroy:function(){var b=this;b.element.html(b._oriContent);b.element.removeAttr("tabindex");if(b._oriStyle===undefined)b.element.removeAttr("style");else b.element.attr("style",b._oriStyle);b.element.insertBefore(b.editor);b.element.unbind("."+b.widgetName);b.editor.remove();a.Widget.prototype.destroy.call(b)},showEditorDialog:function(a){switch(a){case Sb:case jc:case Mb:case mc:case tc:case Tb:case oc:case lc:case uc:case cc:case dc:case Yb:this._ribbonCommand(a);break;default:c("Cannot find the dialog with command name '"+a+"'!")}},executeEditorAction:function(b,a){this._ribbonCommand(b,a)},_isFontSizeCustomized:function(){if(J!==null)return J;var b=this.$ribbon.wijribbon("getDropdownList",z),c=[ib,jb,qb,nb,pb,mb,hb];J=false;a.each(b,function(b){if(a.inArray(b,c)===-1){J=true;return false}});return J},_fontSizeCommand:function(e){var c=this,d=c._getDesignViewDocument(),b=4,f="font-size",g=[];switch(e){case ib:b=1;break;case jb:b=2;break;case qb:b=3;break;case nb:b=4;break;case pb:b=5;break;case mb:b=6;break;case hb:b=7}if(!c._isFontSizeCustomized())d.execCommand("FontSize",false,b);else if(a.browser.msie)c._formatFontSpan(d,f,e);else{d.execCommand("FontSize",false,b);a.each(a("font[size]",d),function(d,b){g.push(c._replaceFontWithSpan(a(b),"size",f,e))});c._setSelection(g)}c.options.mode==="bbcode"&&!a.browser.msie&&c._convertFontStyleToStandTag();c._addtoUndoBuffer()},_fontNameCommand:function(f){var b=this,d=b._getDesignViewDocument(),e=b.$ribbon.wijribbon("getDropdownList",t),c;a.each(e,function(b,a){if(f===b){c=a;return false}});d.execCommand("FontName",false,c);b._isFontSizeCustomized()&&a.browser.msie&&b._formatFontSpan(d,"font-family",c);b._addtoUndoBuffer()},_formatFontSpan:function(h,b,f){var c=this,e=f,d="fontFamily",g=[];if(b!=="font-family"){e="c1-temp";d="fontSize"}h.execCommand("FontName",false,e);a.each(a("font[face='"+e+"']",h),function(k,j){var i=c._replaceFontWithSpan(a(j),"face",b,f),h,e;g.push(i);h=a("span."+x,i);for(e=h.length-1;e>=0;e--)c._removeSpecifiedStyleSpan(a(h[e]),d,b);a.each(i,function(f,e){a.each(a(e).parents("span."+x),function(h,g){var f=a(g);if(f.children().length>1)return false;f.text()===a(e).text()&&c._removeSpecifiedStyleSpan(f,d,b)})})});c._setSelection(g)},_setSelection:function(c,k,j){var i=this._getDesignViewWindow(),g=i.document,b,f,e,d,h=0;try{if(a.browser.msie){b=g.selection.createRange();if(c){a.each(c,function(b,a){h+=a.text().length});b.moveToElementText(c[0][0]);b.collapse(true);b.moveEnd("character",h)}else{b.moveStart("textedit",-1);b.collapse(true);b.moveStart("character",k);b.moveEnd("character",j)}b.select()}else{d=i.getSelection();b=g.createRange();f=c[0][0];e=c[c.length-1][0];b.setStart(f,0);b.setEnd(e,e.childNodes.length);d.removeAllRanges();d.addRange(b)}}catch(l){}},_replaceFontWithSpan:function(a,c,e,d){a.wrap("<span class = '"+x+"' style='"+e+":"+d+"'></span>");var b=a.parent();a.removeAttr(c);if(/<font\s*>/ig.test(b.html())){b.html(a.html());a.remove()}return b},_removeSpecifiedStyleSpan:function(b,f,e){var c,d=true;b[0].style[f]!==""&&b.css(e,"");c=b.attr("style");c&&a.each(c.split(";"),function(f,c){var b=a.trim(c).toLowerCase();if(b!==""&&b.indexOf(e)!==-1){d=false;return false}});d&&b.replaceWith(b.html())},_removeFormat:function(){var c=this,d=c._getDesignViewDocument(),b={};d.execCommand(Pb,false,null);c._isFontSizeCustomized()&&a.browser.msie&&c._removeFormatForIE(d);c._addtoUndoBuffer();b[rb]=false;b[lb]=false;b[ob]=false;b[gb]=false;b[y]=false;b[v]=false;b[W]=false;b[V]=false;b[fb]=false;b[ab]=false;b[bb]=false;b[eb]=false;c.$ribbon.wijribbon(dd,b)},_removeFormatForIE:function(g){var i=g.selection.createRange(),k=i.htmlText,s=i.text,p=0,r=a(i.parentElement()),m=a(g.body),o="",l="",h="__c1temp",j="c1-temp",q="<span class='"+j+"'>"+h+"</span>",b,f,e,d,c,n;r.addClass("c1-app-parent");i.pasteHTML(q);p=m.text().indexOf(h);b=a("span."+j,g);f=b;b.parentsUntil("body").each(function(){if(a(this).is(".c1-app-parent"))return false;f=a(this)});b.html(k);e=a("span."+x,b);for(c=e.length-1;c>=0;c--){d=a(e[c]);d.replaceWith(d.html())}!f.is("."+j)&&f.after(b);a.each(f.parents("span."+x),function(c,b){o+="</span>";l="<span class='"+x+"' style = '"+a(b).attr("style")+"'>"+l});k=b.html();b.replaceWith(h);n=m.html().split(h);m.html(n[0]+o+k+l+n[1]);e=a("span."+x,g);for(c=e.length-1;c>=0;c--){d=a(e[c]);d.text()===""&&d.replaceWith(d.html())}a(".c1-app-parent",g).removeClass("c1-app-parent");this._setSelection(null,p,s.length)},_toggleFullScreen:function(){var b=this,a=b.options;a.fullScreenMode=!a.fullScreenMode;b._setFullScreen(a.fullScreenMode)},_setFullScreen:function(k){var b=this,l=1,o=b._getHeader(),n=b._getFooter(),m=b._getContent(),d=b.options.fullScreenContainerSelector,c=a(d),i=b._getDesignViewText(),g,f,h;if(k){if(c.length===0){c=a(j);d="body";b._oriDocOverFlow=a(document.documentElement).css("overflow");a(document.documentElement).css({overflow:"hidden"});!a.browser.mozilla&&window.scrollTo(0,0);a(j).bind("resize.wijeditor",function(){b._fullscreenOnWindowResize()})}g=c.width();f=c.height()-2*l;wc=b.editor.width();rc=b.editor.height();if(!Ed)Ed=b.editor.parent();if(!b._replacedDiv)b._replacedDiv=a("<div />");b.editor.after(b._replacedDiv);a(d).append(b.editor);b.editor.css({width:g,height:f,position:""}).addClass(Jc);b.sourceView.css({width:g,height:f});b.$ribbon.wijribbon("updateRibbonSize")}else{b._replacedDiv.after(b.editor).remove();b.editor.css({width:wc,height:rc,position:"static"}).removeClass(Jc);b.sourceView.css({width:wc,height:rc});!b.options.fullScreenContainerSelector&&a(document.documentElement).css({overflow:b._oriDocOverFlow});a(j).unbind("resize.wijeditor");b.$ribbon.wijribbon("updateRibbonSize")}h=b.editor.height()-o.outerHeight(true)-n.outerHeight(true);m.height(h).wijsplitter("refresh");b._addHandlerToDesignView();b._addDefaultFontStyleToDesignView();b._createWijMenu();a.browser.msie&&window.setTimeout(function(){b._setDesignViewText(i);e(a.browser.version)>=9&&b.sourceView.val(i)},40)},_createWijMenu:function(){var b=this,c=b._getDesignViewDocument();b.contextMenu&&b.contextMenu.wijmenu({orientation:"vertical",trigger:b.designView,triggerEvent:"rtclick",showing:function(j,i){if(a.browser.msie)H=c.selection.createRange();var d=b.designView.offset(),e=a(a(b.designView)[0].contentWindow).scrollLeft(),f=a(a(b.designView)[0].contentWindow).scrollTop(),g=d.left+2-e,h=d.top-f;i.options.position={my:"left top",at:"right top",of:j,offset:g+" "+h,collision:"none none"}},animation:{animated:"fade"},select:function(c,a){b._setIESelection();b._contextMenuItemClick(c,a);b.contextMenu.wijmenu("deactivate")}})},_fullscreenOnWindowResize:function(){var b=this,h=b._getHeader(),f=b._getFooter(),d=b._getContent(),c,g=a(window).width(),e=a(window).height();b.editor.css({width:g,height:e});c=b.editor.height()-h.height()-f.height();d.height(c).wijsplitter("refresh")},_saveText:function(){},_doSpellCheck:function(){},_ribbonCommand:function(g,i){var b=this,d=b._getDesignViewDocument(),h=b._getContent(),c,f,e;if(i===t){b._fontNameCommand(g);b._onDesignViewBlur(null);return}if(i===z){b._fontSizeCommand(g);b._onDesignViewBlur(null);return}b._setIEFocus();switch(g){case ld:if(a.browser.msie){d.execCommand("FormatBlock",false,"<ADDRESS>");e=d.selection.createRange();e=a(e.parentElement()).closest("address");if(e.length){e.replaceWith("<blockquote>"+e.html()+"</blockquote>");d.body.innerHTML=d.body.innerHTML.replace(/<BLOCKQUOTE>\s*?<BLOCKQUOTE>/gi,"<BLOCKQUOTE>");d.body.innerHTML=d.body.innerHTML.replace(/<\/BLOCKQUOTE>\s*?<\/BLOCKQUOTE>/gi,"</BLOCKQUOTE>");d.body.innerHTML=d.body.innerHTML.replace(/<BLOCKQUOTE>\s*?<\/BLOCKQUOTE>/gi,"")}}else d.execCommand("FormatBlock",false,"<BLOCKQUOTE>");break;case Kd:c=b._generateUniqueName("form");b.insertHTML('<form id="'+c+'" name="'+c+'" method="post">'+c+"</form>");break;case jd:c=b._generateUniqueName("image");b.insertHTML('<input id="'+c+'" name="'+c+'" type="image" value="'+c+'"/>');break;case wd:c=b._generateUniqueName("textarea");b.insertHTML('<textarea id="'+c+'" name="'+c+'" rows="4" cols="48"></textarea>');break;case Fd:c=b._generateUniqueName("button");b.insertHTML('<input id="'+c+'" name="'+c+'" type="button" value="'+c+'"/>');break;case Cd:c=b._generateUniqueName("textbox");b.insertHTML('<input id="'+c+'" name="'+c+'" type="text" value="'+c+'"/>');break;case zd:c=b._generateUniqueName("list");b.insertHTML('<select id="'+c+'" name="'+c+'" style="width: 120px" size="8"></select>');break;case ud:c=b._generateUniqueName("password");b.insertHTML('<input id="'+c+'" name="'+c+'" type="password" value="'+c+'"/>');break;case ed:c=b._generateUniqueName("dropdown");b.insertHTML('<select id="'+c+'" name="'+c+'"></select>');break;case id:c=b._generateUniqueName("hidden");b.insertHTML('<input id="'+c+'" name="'+c+'" type="hidden" value="'+c+'" />');break;case Hd:c=b._generateUniqueName("radiobox");b.insertHTML('<input id="'+c+'" name="'+c+'" type="radio" value="'+c+'"><label for="'+c+'">'+c+"</label></input>");break;case sd:c=b._generateUniqueName("checkbox");b.insertHTML('<input id="'+c+'" name="'+c+'" type="checkbox" value="'+c+'"><label for="'+c+'">'+c+"</label></input>");break;case Nb:case ec:case Xb:case gc:case N:case Ob:case fc:case Zb:b._tableAction(g);break;case yd:b._toggleTableBorders();break;case y:try{if(d.queryCommandState(v)){d.execCommand(v,false,null);b.$ribbon.wijribbon(u,v,false)}}catch(k){}d.execCommand(y,false,null);b._addtoUndoBuffer();break;case v:try{if(d.queryCommandState(y)){d.execCommand(y,false,null);b.$ribbon.wijribbon(u,y,false)}}catch(j){}d.execCommand(v,false,null);b._addtoUndoBuffer();break;case Pb:b._removeFormat();break;case kd:b.insertHTML("<br/>");break;case Tc:f=b._getSelectedContent();if(!f||f==="")f="&nbsp;";b.insertHTML("<p>"+f+"</p>");break;case Oc:b.insertHTML('<div title="Print Page Break" style="font-size:1px;page-break-before:always;vertical-align:middle;height:1px;background-color:#c0c0c0">&nbsp;</div>');break;case md:b._toggleFullScreen();break;case D:b._undoAction();break;case I:b._redoAction();break;case yc:b._execCut();break;case sc:b._execCopy();break;case pc:b._execPaste();break;case Jd:b.insertDateAndTime();break;case Wb:b.$modes.wijribbon(C,O,true).wijribbon(u,Wb,true);b.$ribbon.wijribbon("option","disabled",false);h.wijsplitter("option","panel2",{collapsed:true});break;case hc:b.$modes.wijribbon(C,O,true).wijribbon(u,hc,true);b.$ribbon.wijribbon("option","disabled",false);h.wijsplitter("option",{panel1:{collapsed:false},panel2:{collapsed:false}});break;case ac:b.$modes.wijribbon(C,O,false).wijribbon(u,ac,true);b.$ribbon.wijribbon("option","disabled",true);h.wijsplitter("option","panel1",{collapsed:true});break;case O:h.wijsplitter("option","panel1").collapsed&&b._toggleWordWrap();break;case cc:b._saveSelectionForIE();b._createDialog(this.localizeString("backColorDialogTitle","Set BackColor"),b._getDialogRes_BackColor(),b.initBackColorDialog);break;case dc:b._saveSelectionForIE();b._createDialog(this.localizeString("foreColorDialogTitle","Set ForeColor"),b._getDialogRes_ForeColor(),b.initForeColorDialog);break;case Sb:b._saveSelectionForIE();b._createDialog(this.localizeString("insertTableDialogTitle","Insert Table"),b._getDialogRes_Table(false),b.initInsertTableDialog);break;case qd:b._getEditableTable()&&b._createDialog(this.localizeString("editTableDialogTitle","Edit Table"),b._getDialogRes_Table(true),b.initEditTableDialog);break;case Bd:b._createDialog(this.localizeString("previewDialogPreview","Preview"),b._getDialogRes_Preview(),b.initPreviewDialog);break;case lc:b._createDialog(this.localizeString("cleanUpDialogTitle","Clean up source HTML document"),b._getDialogRes_CleanUp(),b.initCleanUpDialog);break;case oc:b._saveSelectionForIE();b._createDialog(this.localizeString("mediaDialogTitle","Insert media"),b._getDialogRes_Media(),b.initMediaDialog);break;case Tb:b._saveSelectionForIE();b._createDialog(this.localizeString("specialCharacterDialogTitle","Insert special character"),b._getDialogRes_SpecialCharacter(),b.initSpecialCharacterDialog);break;case tc:b._createDialog(this.localizeString("findAndReplaceTitle","Find and replace"),b._getDialogRes_FindAndReplace(),b.initFindDialog);break;case mc:bc=b._getSelectedElement();b._createDialog(this.localizeString("tagInspectorDialogTitle","Tag Inspector"),b._getDialogRes_TagInspector(),b.initTagInspectorDialog);break;case jc:b._saveSelectionForIE();b._createDialog(this.localizeString("templateDialogApplyTemplate","Apply Template"),b._getDialogRes_Template(),b.initTemplateDialog);break;case Mb:b._saveSelectionForIE();b._createDialog(this.localizeString("imageEditorDialogImageBrowser","Image Browser"),b._getDialogRes_ImageBrowser(),b.initImageBrowserDialog);break;case uc:b._saveSelectionForIE();b._createDialog(this.localizeString("hyperLinkDialogInserthyperLink","Insert hyperLink"),b._getDialogRes_Link(),b.initHyperLinkDialog);break;case Yb:b._saveSelectionForIE();b._createDialog("Insert Code",b._getDialogRes_Code(),b.initInsertCodeDialog);break;case fb:case ab:case bb:case eb:case Ad:case Gd:case rb:case lb:case gb:case W:case V:case ob:case td:case rd:d.execCommand(g,false,null);b.options.mode==="bbcode"&&!a.browser.msie&&b._convertStyleToStandTag();b._addtoUndoBuffer();break;case vc:b._saveText();break;case vd:b._doSpellCheck()}b._onDesignViewBlur(null)},_saveSelectionForIE:function(){var c=this._getDesignViewWindow(),b;if(a.browser.msie){b=c.document.selection;H=b.createRange()}},_createDialog:function(d,e,c){var a=this,b=a.dialog;b.html("").undelegate(a.widgetName).undelegate("."+a.widgetName).append(e);a.subDialog&&a.subDialog.html("").undelegate(a.widgetName).undelegate("."+a.widgetName);if(!b.data("wijdialog"))b.wijdialog({width:"auto",height:"auto",modal:true,title:d,position:"center",resizable:false,captionButtons:{pin:{visible:false},refresh:{visible:false},toggle:{visible:false},minimize:{visible:false},maximize:{visible:false}}});else{b.wijdialog("reset");b.wijdialog("option",{width:"auto",height:"auto",title:d})}a._adjustDialogLayoutForIE7();c&&c.call(a);b.wijdialog("open")},_adjustDialogLayoutForIE7:function(){var b=this.dialog;a.browser.msie&&/^7\.[0-9]+/.test(a.browser.version)&&b.wijdialog("option","width",b.parent().width())},_contextMenuItemClick:function(e,b){var a=this,c=b.item.element.attr("_c1buttoncmd");switch(c){case yc:a._execCut();break;case sc:a._execCopy();break;case pc:a.focus();a._execPaste()}},_execCut:function(){var b=this,d=b._getDesignViewDocument();if(a.browser.safari)c(this.localizeString("errorMessageCutError","This function is not supported in current browser.  Plesse use (Ctrl + X)."));else if(a.browser.msie){d.execCommand("Cut",false,null);b._addtoUndoBuffer()}else{b._execCopy();b._deleteSelectionContent();b._addtoUndoBuffer()}},_execCopy:function(){var b=this,d=b._getDesignViewDocument();if(a.browser.safari)c(this.localizeString("errorMessageCopyError","This function is not supported in current browser. Plesse use (Ctrl + C)."));else if(a.browser.msie){d.execCommand("Copy",false,null);b._addtoUndoBuffer()}else b._copyToClipboard(b._getSelectedContent())},_execPaste:function(){var d=this,b,e=d._getDesignViewDocument();if(a.browser.safari)c(this.localizeString("errorMessagePasteError","This function is not supported in current browser. Plesse use (Ctrl + V)."));else if(a.browser.msie){e.execCommand("Paste",false,null);d._addtoUndoBuffer()}else try{b=d._copyFromClipboard();b&&b!==""&&d.insertHTML(b)}catch(f){}},_getFontSizeCollection:function(){return{"10px":ib,"13px":jb,"16px":qb,"18px":nb,"24px":pb,"32px":mb,"48px":hb,1:ib,2:jb,3:qb,4:nb,5:pb,6:mb,7:hb}},_updateButtonStates:function(k){var c=this,j=c._getDesignViewDocument(),d,b,g={},i=[rb,lb,ob,gb,y,v,W,V,fb,ab,bb,eb],f,h=k.target,e=a(h);a.each(i,function(b,a){g[a]=j.queryCommandState(a)});c.$ribbon.wijribbon(dd,g);d=c._queryCommandValue(t)||"";a.each(c.$ribbon.wijribbon("getDropdownList",t),function(c,a){if(a.toUpperCase()===d.toUpperCase()){b=c;return false}});c.$ribbon.wijribbon(u,b,true,t);if(c._isFontSizeCustomized()){if(e.is("span"))b=h.style.fontSize;else b="";if(b===""){f=e.parents("span."+x);a.each(f,function(c,a){b=a.style.fontSize;if(b&&b!=="")return false})}if(b==="")b=e.css("font-size")}else{d=c._queryCommandValue(z)||"";if(d==="")d=e.css("font-size");a.each(c._getFontSizeCollection(),function(c,a){if(c.toString()===d.toString()){b=a;return false}})}c.$ribbon.wijribbon(u,b,true,z)},_queryCommandValue:function(a){var b=this._getDesignViewDocument();try{if(!b.queryCommandEnabled(a))return null}catch(c){return null}try{return b.queryCommandValue(a)}catch(d){}return null},_escActionAssociated:function(){var b=this,a=b._getDesignViewWindow();a.document.selection!==undefined&&a.document.selection.empty();a.getSelection!==undefined&&a.getSelection().removeAllRanges();b._hideAllDropdownsMenus()},_hideAllDropdownsMenus:function(){var a=this;a.contextMenu&&a.contextMenu.wijmenu("hideAllMenus");a.$ribbon.wijribbon("hideDropdown",t).wijribbon("hideDropdown",z).wijribbon("hideDropdown",qc)},_onDesignViewKeyDown:function(b){var a=this,c;a._setSaveBtnEnabled();try{if(b.ctrlKey)c=String.fromCharCode(b.keyCode).toLowerCase();else switch(b.keyCode){case 27:a._escActionAssociated();break;case 13:case 46:a._addtoUndoBuffer();a._continueSavingInputTextForUndo=false;break;default:a._continueSavingInputTextForUndo=true}}catch(d){}},_onDesignViewKeyUp:function(a){var b=this,c;(a.keyCode===37||a.keyCode===38||a.keyCode===39||a.keyCode===40||a.keyCode===33||a.keyCode===34||a.keyCode===35||a.keyCode===36)&&b._updateButtonStates(a);if(a.ctrlKey){c=String.fromCharCode(a.keyCode).toLowerCase();switch(c){case"y":b._redoAction();a.preventDefault();a.stopPropagation();break;case"z":b._undoAction();a.preventDefault();a.stopPropagation();break;case"x":case"v":b._addtoUndoBuffer();b._continueSavingInputTextForUndo=false}}},_onDesignViewMouseUp:function(c){var d=this,b;if(c.button===2)return;d._updateButtonStates(c);d._refreshPathSelector();d._hideAllDropdownsMenus();a(document).mouseup();if(a.browser.msie){b=a(c.target).closest("a");if(c.ctrlKey&&b.length>0)try{b.focus();j.open(b[0].href,"_blank")}catch(e){}}},_onDesignViewBlur:function(e){var c=this,d=c.options,b;b=c._getDesignViewText();c._onTextChange(e);if(d.mode==="bbcode")b=c._convertHtmlToBBCode(a.trim(b));c.sourceView.val(b);d.text=b},_onTextChange:function(b){var a=this;if(a._continueSavingInputTextForUndo){a._addtoUndoBuffer();a._continueSavingInputTextForUndo=false}a._trigger("textChanged",b,{text:a.options.text})},_onSourceViewBlur:function(){var b=this,a;a=b.sourceView.val();b._setDesignViewText(a);b.options.text=a},_convertBBCodeToHtml:function(a){a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");a=a.replace(/(?:\r\n|\n|\r)/g,"<br>");a=a.replace(/\[EMAIL\]([\s\S]*?)\[\/EMAIL\]/gim,'<a href="mailto:$1">$1</a>');a=a.replace(/\[EMAIL\=([^\]]+)]([\s\S]*?)\[\/EMAIL\]/gim,'<a href="mailto:$1">$2</a>');a=a.replace(/\[URL\]([\s\S]*?)\[\/URL\]/gim,'<a href="$1">$1</a>');a=a.replace(/\[URL\=([^\]]+)]([\s\S]*?)\[\/URL\]/gim,'<a href="$1">$2</a>');a=a.replace(/\[B\]/gim,"<b>");a=a.replace(/\[\/B\]/gim,"</b>");a=a.replace(/\[I\]/gim,"<i>");a=a.replace(/\[\/I\]/gim,"</i>");a=a.replace(/\[S\]/gim,"<strike>");a=a.replace(/\[\/S\]/gim,"</strike>");a=a.replace(/\[U\]/gim,"<u>");a=a.replace(/\[\/U\]/gim,"</u>");a=a.replace(/\[IMG height=(.*?) width=(.*?)](.+?)\[\/IMG\]/gim,'<img height="$1" width = "$2" src="$3"/>');a=a.replace(/\[BLOCK\]/gim,"<blockquote>");a=a.replace(/\[\/BLOCK\]/gim,"</blockquote>");a=a.replace(/\[LIST\=1\]\[\*\]([\s\S]*?)\[\/LIST\]/gim,"<ol><li>$1</li></ol>");a=a.replace(/\[LIST\]\[\*\]([\s\S]*?)\[\/LIST\]/gim,"<ul><li>$1</li></ul>");a=a.replace(/\[\*\]/gim,"</li><li>");a=a.replace(/\[size=([^\]]*?)\]/gi,'<font size="$1">');a=a.replace(/\[\/size\]/gim,"</font>");a=a.replace(/\[color=([^\]]*?)\]/gi,'<font color="$1">');a=a.replace(/\[\/color\]/gim,"</font>");return a},_replaceComplexHtml:function(g){var f,c,d,b,e=a("<div/>").html(g);f=a("img",e);a.each(f,function(){d="[IMG height="+a(this).height()+" width="+a(this).width()+"]"+a(this).attr("src").toString()+"[/IMG]";a(this).replaceWith(d)});c=a("font",e);for(b=c.length-1;b>=0;b--){if(a(c[b]).attr("color")&&a(a(c[b])).attr("size"))d="[Color="+a(a(c[b])).attr("color")+"][Size="+a(a(c[b])).attr("size")+"]"+a(a(c[b])).html()+"[/Size][/Color]";else if(a(a(c[b])).attr("color")&&!a(a(c[b])).attr("size"))d="[Color="+a(a(c[b])).attr("color")+"] "+a(a(c[b])).html()+"[/Color]";else if(a(a(c[b])).attr("size")&&!a(a(c[b])).attr("color"))d="[Size="+a(a(c[b])).attr("size")+"]"+a(a(c[b])).html()+"[/Size]";a(a(c[b])).replaceWith(d)}return e.html()},_convertHtmlToBBCode:function(a){var b=this;if(a==="")return;a=b._replaceComplexHtml(a);a=a.replace(/<br(?=[ \/>]).*?>/gim,"\r\n");a=a.replace(/<a .*?href=(["'])(.+?)\1.*?>(.+?)<\/a>/gi,"[URL=$2]$3[/URL]");a=a.replace(/<a .*?href=(["'])mailto:(.+?)\1.*?>(.+?)<\/a>/gi,"[EMAIL=$2]$3[/EMAIL]");a=a.replace(/<(?:b|strong)>/gim,"[B]");a=a.replace(/<\/(?:b|strong)>/gim,"[/B]");a=a.replace(/<(?:i|em)>/gim,"[I]");a=a.replace(/<\/(?:i|em)>/gim,"[/I]");a=a.replace(/<(?:strike|s)>/gim,"[S]");a=a.replace(/<\/(?:strike|s)>/gim,"[/S]");a=a.replace(/<u>/gim,"[U]");a=a.replace(/<\/u>/gim,"[/U]");a=a.replace(/<blockquote.*?\>/gim,"[BLOCK]");a=a.replace(/\s{0,}<\/blockquote>/gim,"[/BLOCK]");a=a.replace(/(?:\r\n|\r|\n){0,1}<(?:ol)>[\s]*/gim,"[LIST=1]");a=a.replace(/<\/(?:ol)>/gim,"[/LIST]");a=a.replace(/(?:\r\n|\r|\n){0,1}\<(?:ul)>[\s]*/gim,"[LIST]");a=a.replace(/<\/(?:ul)>/gim,"[/LIST]");a=a.replace(/\s{0,}<li\s{0,1}.*?>([\s\S]*?)\n{0,}\s{0,}<\/li>/gim,"[*]$1");a=a.replace(/&nbsp;/gi," ");a=a.replace(/(<[^>]+>)/gm,"");return a},_convertFontStyleToStandTag:function(){var e=this,g=e._getDesignViewDocument(),f=a(g.body),b,c,d=a("[style*='color: ']",f);if(d.length!==0){b=d;c="<font color='"+e._getWebColorFromRgb(d.css("color"))+"'></font>"}b&&a.each(b,function(){if(a(this).is("span"))a(this).replaceWith(a(c).html(a(this).html()));else a(this).is("font")&&a(this).attr("size")&&a(this).removeAttr("style").html(a(c).html(a(this).html()))})},_convertStyleToStandTag:function(){var j=this,k=j._getDesignViewDocument(),d=a(k.body),b,c,e,i=a("[style*='font-weight: bold;']",d),g=a("[style*='font-style: italic;']",d),h=a("[style*='text-decoration: line-through;']",d),f=a("[style*='text-decoration: underline;']",d);if(i.length!==0){b=i;c="<b></b>";e="font-weight"}else if(g.length!==0){b=g;c="<i></i>";e="font-style"}else if(h.length!==0){b=h;c="<strike></strikes>";e="text-decoration"}else if(f.length!==0){b=f;c="<u></u>";e="text-decoration"}b&&a.each(b,function(){if(a(this).is("span")&&this.style.fontSize==="")a(this).replaceWith(a(c).html(a(this).html()));else a(this).removeAttr("style").html(a(c).html(a(this).html()))})},_getWebColorFromRgb:function(a){var c=this,b;if(a.indexOf("rgb(")===0){b=a.substring(4,a.length-1).split(",");a=c._convertToWebColor(e(b[0]),e(b[1]),e(b[2]))}return a},_updateList:function(d,c){var b;a("option",c).remove();for(b in d)d[b]&&c.append("<option>"+b+"</option>")},_triggerEvent:function(c,d){var b=this,a=b.options[c];return a&&typeof a==="function"?a.call(b,d):a},_closeDialog:function(){this.dialog.wijdialog("close")},_onTemplateList:function(a){return this._triggerEvent("templateList",a)},updateTemplateList:function(c,e){var b=this,d=e||a("select",b.dialog);b._updateList(c,d);b._templateList=c},initTemplateDialog:function(){var b=this,d=b.dialog,e=a("select",d),c=b._onTemplateList();d.delegate("select","change."+b.widgetName,function(){b.templateListOnChanged()}).delegate("."+pd,"click."+b.widgetName,function(){b.deleteTemplate()}).delegate("."+xd,"click."+b.widgetName,function(){b.saveTemplate()}).delegate(k,"click."+b.widgetName,function(){b.applyTemplate()}).delegate(q,"click."+b.widgetName,function(){b._closeDialog()});if(!c){c=b._templateList;if(!c)return}b.updateTemplateList(c,e)},templateListOnChanged:function(){var g=this,c=g.dialog,d=a("select",c).val(),e=a("iframe",c),f=g._templateList,b;if(!f)return;b=f[d];b.src&&e.attr("src",b.src+"?d="+(new Date).getMilliseconds().toString());b.text&&e.length>0&&e[0].contentWindow.document.write(b.text);if(d){a("."+Rb,c).html(d);a("."+L,c).val(d)}if(b.desc){a("."+Vb,c).html(b.desc);a("."+Y,c).val(b.desc)}},_onSaveTemplate:function(a){this._triggerEvent("saveTemplate",a)},saveTemplate:function(){var d=this,f=d.dialog,b=a("."+L,f).val(),g=a("."+Y,f).val(),e=d._templateList,h=this._getDesignViewText();if(a.trim(b)===""){c(this.localizeString("errorMessageTemplateNameError","Please input a template name!"));return}if(!e){d._templateList=[];e=d._templateList}!e[b]&&a("select",f).append("<option>"+b+"</option>");e[b]={desc:g,text:h};d._onSaveTemplate({name:b,desc:g,text:h})},_onDeleteTemplate:function(a){this._triggerEvent("deleteTemplate",a)},deleteTemplate:function(){var e=this,b=e.dialog,f=a("select",b),d=f.val(),g=e._templateList;if(a.trim(d)===""){c(this.localizeString("errorMessageTemplateFileError","Please select a template file."));return}a("option:selected",f).remove();a("iframe",b).attr("src","about:blank");a("."+Rb,b).empty();a("."+L,b).val("");a("."+Vb,b).empty();a("."+Y,b).val("");delete g[d];e._onDeleteTemplate(d)},applyTemplate:function(){var b=this,d=b.dialog,g=a("select",d),e=g.val(),f=a("iframe",d)[0],i=a("."+L,d).val(),h=f.contentWindow.document.body.innerHTML;if(a.trim(i)===""||a.trim(e)===""){c(this.localizeString("errorMessageValidTemplateFileError","Please select a valid template file."));return}b._setDesignViewText(h);b._addtoUndoBuffer();b._setSaveBtnEnabled();b._closeDialog()},_onImageList:function(){var b=this,a=b.options.imageList;return a&&typeof a==="function"?a.call(b):a},updateImageList:function(b,g){var c=this,e=c.dialog,f=g||a("select",e),d=a("."+Qb,e);c._updateList(b,f);c._imgList=b;if(!b){d.addClass(Ab);return}d.removeClass(Ab)},initImageBrowserDialog:function(){var b=this,c=b.dialog,d=b._onImageList();a("img",c).hide();c.delegate("select","change."+b.widgetName,function(){b.imageListOnChanged(this)}).delegate(k,"click."+b.widgetName,function(a){b.submitInsertImageDialog();b._onDesignViewBlur(a)}).delegate(q,"click."+b.widgetName,function(){b._closeDialog()});a("."+db+" input",c).bind("change."+b.widgetName,function(){b.imageUrlChanged(this)});if(!d){d=b._imgList;if(!d){a("."+Qb,c).addClass(Ab);return}}b.updateImageList(d,a("select",c))},imageUrlChanged:function(c){var d=this,b=d.dialog;a("img",this.dialog).attr("src",a(c).val()+"?"+ +new Date).show().bind("load",function(){a("."+X+" input",b).val(a("img",b).width());a("."+T+" input",b).val(a("img",b).height())})},imageListOnChanged:function(){var e=this,b=e.dialog,f=a("select",b).val(),d=e._imgList,c;if(!d)return;c=d[f];a("img",b).attr("src",c).show();a("."+db+" input",b).attr("value",c);j.setTimeout(function(){a("."+X+" input",b).val(a("img",b).width());a("."+T+" input",b).val(a("img",b).height())},200)},submitInsertImageDialog:function(){var b=this,e,d=b.dialog,g=a("."+db+" input",d).val(),i=a("."+nd+" input",d).val(),h=a("."+X+" input",d).val(),f=a("."+T+" input",d).val(),j=a("."+od+" input",d).val();if(a.trim(g)===""){c(this.localizeString("errorMessageSelectImageError","Please select a image."));return}if(!b._isNumeric(h)){c(this.localizeString("errorMessageImageWidthError","Please input a number for 'Image width' textbox."));return}if(!b._isNumeric(f)){c(this.localizeString("errorMessageImageHeightError","Please input a number for 'Image height' textbox."));return}b.focus();e='<img src="'+g+'" alt="'+i+'" width="'+h+'" height="'+f;if(b.options.mode!=="bbcode")e+='" style="'+j;e+='"/>';b.insertHTML(e);b._closeDialog()},initHyperLinkDialog:function(){var b=this,c=b.dialog,e=b.getLinkHrefField(),h=a("."+tb,c),g,d,f,i=a("."+K+" input",c);c.delegate(k,"click."+b.widgetName,function(a){b.submitHyperLinkDialog();b._onDesignViewBlur(a)}).delegate(q,"click."+b.widgetName,function(){b._closeDialog()}).delegate("."+Hb,"change."+b.widgetName,function(){b.anchorListOnChanged(this)}).delegate("."+Pc+">div","click."+b.widgetName,function(){b.radioListOnChanged()}).delegate("."+Ec+">div","click."+b.widgetName,function(){b.linkIconTypeOnChanged()}).delegate("."+M+" input","change."+b.widgetName,function(){b.tempImg=a('<img src="'+a("."+M+" input",c).val()+'">').appendTo("body");j.setTimeout(function(){a("."+U+" input",c).val(b.tempImg.width());a("."+R+" input",c).val(b.tempImg.height());b.tempImg.remove();b.tempImg=undefined},200)});try{i.val(e);d=b._getLinkInnerHTML()}catch(l){}f=a(d);if(d&&d.substring(0,3)==="<img")g=true;else g=false;if(!g){a("."+G+" input",c).show();h.hide();a("."+G+" input",c).val(d)}else{h.show();a("."+G+" input",c).hide();a("."+M+" input",c).val(f.attr("src"));a("."+U+" input",c).val(f.attr("width"));a("."+R+" input",c).val(f.attr("heigth"))}a("."+Ub+" input",c).val(b._getLinkCssField());a("."+S+" select",c).val(b._getLinkTarget());a("#radAnchor",c).attr("checked","checked");a("#radLinkTypeIsText",c).attr("checked","checked");if(e.length>6)if(e.substring(0,4)==="http")a("#radUrl",c).attr("checked","checked");else if(e.substring(0,6)==="mailto")a("#radMail",c).attr("checked","checked");else if(e.substring(0,1)==="#")a("#radAnchor",c).attr("checked","checked");else a("#radFile",c).attr("checked","checked");f=undefined},_getLinkInnerHTML:function(){var b=this,a;b.focus();a=b._getInspectElement();try{if(a&&a.tagName==="A")return a.innerHTML||""}catch(c){}return b.getSelectionHTMLContent()||""},getLinkHrefField:function(){var b=this,a;b.focus();a=b._getInspectElement();try{if(a&&a.tagName==="A")return b.fixAbsoluteUrlsIfNeeded(a.href||"")}catch(c){}return""},_getLinkTarget:function(){var b=this,a;b.focus();a=b._getInspectElement();try{if(a&&a.tagName==="A")return a.target||""}catch(c){}return""},_getLinkCssField:function(){var b=this,a;b.focus();a=b._getInspectElement();try{if(a&&a.tagName==="A")return a.style.cssText||""}catch(c){}return""},submitHyperLinkDialog:function(){var d=this,b=d.dialog,m=a("#radMail",b),l=a("."+K+" input",b),p=a("."+G+" input",b),q=a("."+Ub+" input",b),n=a("."+S+" select",b),g=l.val(),f=p.val(),o=n.val(),k=a("#radLinkTypeIsImage",b),e=k.attr("checked"),j=a("."+M+" input",b).val(),i=a("."+U+" input",b).val(),h=a("."+R+" input",b).val(),r=q.val();if(g===""){c(this.localizeString("errorMessageAddressError","Please input address!"));return}if(f===""&&!e){c(this.localizeString("errorMessageDisplayTextError","Please input display text!"));return}if(j===""&&e){c(this.localizeString("errorMessageHyperLinkImageUrlError","Please input image url!"));return}if(!d._isNumeric(i)&&e){c(this.localizeString("errorMessageHyperLinkImageWidthError","Please input correct image width!"));return}if(!d._isNumeric(h)&&e){c(this.localizeString("errorMessageHyperLinkImageHeightError","Please input correct image height!"));return}if(m.attr("checked")&&!d._isEmail(g)){c(this.localizeString("errorMessageHyperLinkEmail","Please input correct email!"));return}if(e){f='<img src="'+j+'" width="'+i+'" height="'+h;f+='"/>'}d._editLink(f,g,r,o);d._closeDialog()},_editLink:function(g,f,d,e){var b=this,a,c="";b.focus();a=b._getInspectElement();try{if(a&&a.tagName==="A"){a.innerHTML=g;a.href=f;a.target=e;if(d!==a.style.cssText)a.style.cssText=d;b._addtoUndoBuffer();b._setSaveBtnEnabled();return}}catch(h){}c='<a href="'+f+'" target="'+e+'"';if(d!=="")c+=' style="'+d+'"';c+=">"+g+"</a>";b._setIESelection();b.insertHTML(c)},anchorListOnChanged:function(d){var e=this,b=e.dialog,c=a(d).val();if(c!==""){a("."+K+" input",b).val(c);a("#radAnchor",b).attr("checked","checked")}},radioListOnChanged:function(){var e=this,b=e.dialog,c=a("."+Hb,b),d=a("."+K+" input",b);d.val("");if(a("#radUrl",b).is(":checked"))c.hide();else if(a("#radAnchor",b).is(":checked"))c.show();else if(a("#radMail",b).is(":checked")){c.hide();d.val("mailto:")}else a("#radFile",b).is(":checked")&&c.hide()},linkIconTypeOnChanged:function(){var e=this,b=e.dialog,c=a("."+tb,b),d=a("."+G,b);if(a("#radLinkTypeIsText",b).is(":checked")){d.show();c.hide()}else if(a("#radLinkTypeIsImage",b).is(":checked")){d.hide();c.show()}},_getDialogRes_Code:function(){var b=this,a=b._createDiv(h);a.add(b._createElement("div","Enter source code",{"class":Wd}));a.add(b._createElement("textarea","",{"class":Yc}));a.add(b._createSeparator());a.add(b._createOKCancelButtons());return a.render()},initInsertCodeDialog:function(){var a=this,b=a.dialog;b.delegate(k,"click."+a.widgetName,function(b){a.submitCodeDialog();a._onDesignViewBlur(b)}).delegate(q,"click."+a.widgetName,function(){a._closeDialog()})},submitCodeDialog:function(){var c=this,e=c.dialog,d=a("."+Yc,e),b=d.val();if(b==="")return;b=b.replace(/</g,"&lt;");b=b.replace(/>/g,"&gt;");b="<pre>"+b+"</pre>";c._setIESelection();c.insertHTML(b);c._closeDialog()},initTagInspectorDialog:function(){var b=this,c=b.dialog,d=a("."+zb);c.delegate(k,"click."+b.widgetName,function(a){b.submitTagInspectorDialog();b._onDesignViewBlur(a)}).delegate(q,"click."+b.widgetName,function(){b._closeDialog()}).delegate("#displayNoEmpty","click."+b.widgetName,function(){b.tagInspectorDialogSwitchAttList(this)});b._laySelectedElementAttributes(a("."+Q,c),a("."+Nc,c));a("."+Lb+" input",c).val(b._getSelectedElementStyle());if(b._selectedElementCanHaveChildren()){d.show();a("textarea",d).val(b._getSelectedElementInnerHTML())}else d.hide()},submitTagInspectorDialog:function(){var b=this,g=b.dialog,c=b._getInspectElement(),e=a("."+Q,g),d=a("."+Lb+" input").val(),f=a("."+zb+" textarea").val();try{a.each(a("input:checkbox",e),function(g,f){var b,e,d=a(f);if(d.is(":checked")){b=d.siblings("span").text();b=b.substring(0,b.length-1);e=d.siblings("input:text").val();a(c).attr(b,e)}});if(a.trim(d)!=="")c.style.cssText=d;b._selectedElementCanHaveChildren()&&a(c).html(f)}catch(h){}b._closeDialog();b._addtoUndoBuffer();b._setSaveBtnEnabled()},tagInspectorDialogSwitchAttList:function(c){var b=a("."+Q,this.dialog),d=!c.checked;a.each(a("input:text",b),function(c,b){a(b).val()===""&&a(b).parent("li")[d?"show":"hide"]()})},_laySelectedElementAttributes:function(j,k){var f=this,c=f._getInspectElement(),h,d,e,i=this.localizeString("tagInspectorDialogSave","Save"),b="";if(!c)return;k.html(c.tagName);h=f._getDictionaryDeclare();d=c.tagName.toLowerCase();e=h[d];switch(d){case"ul":case"u":case"textarea":case"tbody":case"tr":case"th":case"td":case"table":case"select":case"strong":case"span":case"p":case"option":case"ol":case"li":case"label":case"input":case"img":case"i":case"hr":case"form":case"font":case"em":case"div":case"code":case"button":case"body":case"b":case"a":b+="<ul class='ui-helper-reset'>";a.each(e,function(d,a){var e=c.getAttribute(a)||"";b+="<li><span class='"+g+"'>";b+=a+":</span>";b+="<input type='text' value='"+e+"'/>";b+="<input type='checkbox' id='save"+d+"'/>";b+="<label for='save"+d+"'>"+i+"</label></li>"})}j.html(b)},_getSelectedElementStyle:function(){var a=this._getInspectElement();return a&&a.style?a.style.cssText||"":""},_getSelectedElementInnerHTML:function(){var a=this._getInspectElement();return a?a.innerHTML:""},_selectedElementCanHaveChildren:function(){return!a(this._getInspectElement()).is("input,hr,br,img")},initBackColorDialog:function(){this._initColorDialog("BackColor")},initForeColorDialog:function(){this._initColorDialog("ForeColor")},_initColorDialog:function(h){var c=this,g=c.dialog,j=c._getDesignViewDocument(),i=j.queryCommandValue(h),f,d,b;g.delegate(k,"click."+c.widgetName,function(a){c.submitColorDialog(h);c._onDesignViewBlur(a)}).delegate(q,"click."+c.widgetName,function(){c._closeDialog()});if(i){b=i.toString();if(a.browser.msie){f=e(b);b="rgb("+(f&255)+", "+((f&65280)>>8)+", "+((f&16711680)>>16)+")"}if(b.indexOf("rgb(")===0){d=b.substring(4,b.length-1).split(",");b=c._convertToWebColor(e(d[0]),e(d[1]),e(d[2]))}else if(b.indexOf("rgba(")===0){d=b.substring(5,b.length-1).split(",");b=c._convertToWebColor(e(d[0]),e(d[1]),e(d[2]))}a("."+B+" input",g).attr("value",b)}a("."+Eb,g).wijeditorcolorcanvas("."+B+" input",b)},submitColorDialog:function(c){var b=this,d=a("."+B+" input",b.dialog);b.setColor(c,d.val());b._closeDialog()},setColor:function(d,e){var b=this,f=b._getDesignViewDocument(),g=b._getDesignViewWindow(),c;b._setIESelection();if(a.browser.mozilla&&d==="BackColor"){c=g.getSelection();b.insertHTML('<span style="background-color:'+e+';">'+c+"</span>")}else{f.execCommand(d,false,e);b.options.mode==="bbcode"&&!a.browser.msie&&b._convertFontStyleToStandTag()}b._addtoUndoBuffer();b._setSaveBtnEnabled()},initInsertTableDialog:function(){var a=this,b=a.dialog;b.delegate(k,"click."+a.widgetName,function(b){a.submitInsertTableDialog();a._onDesignViewBlur(b)}).delegate(Bb,"click."+a.widgetName,function(){a._closeDialog()}).delegate("."+E+" input:button","click."+a.widgetName,function(){a.showTableColorDialog(this)})},submitInsertTableDialog:function(){var a=this,b=a._getValuesFromTableDialog();if(!b)return;a._insertTable(b);a._closeDialog()},_insertTable:function(b){var g=this,c="",d,f;if(!b)return false;g._setIEFocus();c+='<table width="'+b.width+'" height="'+b.height+'" cellspacing="'+b.cspacing+'" cellpadding="'+b.cpadding+'" border="'+b.border+'" bgcolor="'+b.bgcolor+'" style="'+b.css+'">';for(d=0;d<b.rows;d++){c+="<tr>";for(f=0;f<b.cols;f++)c+="<td>Cell "+(d+1)+"-"+(f+1)+"</td>";c+="</tr>"}c+="</table>";if(a.browser.mozilla||a.browser.msie&&e(a.browser.version)>=9)c+="<br />";g.insertHTML(c)},initEditTableDialog:function(){var c=this,b=c.dialog,d=c._getInspectElement(),e,f;b.delegate(k,"click."+c.widgetName,function(a){c.submitEditTableDialog();c._onDesignViewBlur(a)}).delegate(Bb,"click."+c.widgetName,function(){c._closeDialog()}).delegate("."+E+" input:button","click."+c.widgetName,function(){c.showTableColorDialog(this)});if(!d)return;try{e=d.rows;if(e.length>0)f=e[0].cells.length;else f=0;e=e.length}catch(g){}a("."+Kb+" input",b).val(e);a("."+Cb+" input",b).val(f);a("."+Ib+" input",b).val(d.getAttribute("width"));a("."+Gb+" input",b).val(d.getAttribute("height"));a("."+Fb+" input",b).val(d.getAttribute("border"));a("."+xb+" input",b).val(d.getAttribute("cellPadding"));a("."+yb+" input",b).val(d.getAttribute("cellSpacing"));a("."+E+" input",b).val(d.getAttribute("bgcolor")||"#ffffff");a("."+Db+" input",b).val(d.style.cssText)},submitEditTableDialog:function(){var j=this,c=j._getInspectElement(),d=a(c),b=j._getValuesFromTableDialog(),h=b&&e(b.rows),f=b&&e(b.cols),i,g;if(!b)return;if(c){d.attr("width",b.width);d.attr("height",b.height);d.attr("bgcolor",b.bgcolor);d.attr("border",b.border);d.attr("cellSpacing",b.cspacing);d.attr("cellPadding",b.cpadding);c.style.cssText=b.css;if(!h||isNaN(h))return;if(!f||isNaN(f))return;while(c.rows.length>h)c.deleteRow(0);while(c.rows.length<h){i=c.insertRow(0);while(i.cells.length<f){g=i.insertCell(0);g.innerHTML="&nbsp;"}}a.each(c.rows,function(b,a){while(a.cells.length>f)a.deleteCell(0);while(a.cells.length<f){g=a.insertCell(0);g.innerHTML="&nbsp;"}})}j._closeDialog()},_getValuesFromTableDialog:function(){var d=this,b=d.dialog,l=a("."+Kb+" input",b).val(),k=a("."+Cb+" input",b).val(),j=a("."+Ib+" input",b).val(),i=a("."+Gb+" input",b).val(),h=a("."+Fb+" input",b).val(),f=a("."+xb+" input",b).val(),g=a("."+yb+" input",b).val(),n=a("."+Db+" input",b).val(),m=a("."+E+" input",b).val();if(!d._isNumeric(l)){c(this.localizeString("errorMessageRowsError","Please input a number for 'Rows' textbox."));return false}if(!d._isNumeric(k)){c(this.localizeString("errorMessageColumnsError","Please input a number for 'Columns' textbox."));return false}if(!d._isNumeric(j)){c(this.localizeString("errorMessageTableWidthError","Please input a number for 'Table Width ' textbox."));return false}if(!d._isNumeric(i)){c(this.localizeString("errorMessageTableHeightError","Please input a number for 'Table Height' textbox."));return false}if(!d._isNumeric(h)){c(this.localizeString("tableDialogBorderError","Please input a number for 'Border thickness' textbox."));return false}if(!d._isNumeric(f)){c(this.localizeString("tableDialogCellPaddingError","Please input a number for 'Cell Padding' textbox."));return false}if(!d._isNumeric(g)){c(this.localizeString("tableDialogCellSpacingError","Please input a number for 'Cell Spacing' textbox."));return false}return{rows:l,cols:k,width:e(j),height:e(i),border:h,cpadding:f,cspacing:g,css:n,bgcolor:m}},showTableColorDialog:function(f){var b=this,c=b.subDialog,d=a(f).prev().val(),e=b._getDialogRes_Color();c.empty().append(e).wijdialog({width:"auto",height:"auto",modal:true,title:"Set Background Color",position:"center",resizable:false,captionButtons:{pin:{visible:false},refresh:{visible:false},toggle:{visible:false},minimize:{visible:false},maximize:{visible:false}}});c.delegate(df,"click."+b.widgetName,function(){b.submitTableColorDialog()}).delegate(Bb,"click."+b.widgetName,function(){b.closeSubDialog()});d!==""&&a("."+B+" input",c).val(d);a("."+Eb,c).wijeditorcolorcanvas("."+B+" input",d);c.wijdialog("open")},submitTableColorDialog:function(){var b=this,c=b.subDialog,e=b.dialog,d=a("."+B+" input",c).val();a("."+E+" input:text",e).val(d);b.closeSubDialog()},closeSubDialog:function(){this.subDialog.wijdialog("close")},_getEditableTable:function(){var f=this,e,b,d;b=f._getSelectedElement();if(!b){c(this.localizeString("errorMessageSelectTableError","Please select a table!"));return false}d=a(b);if(d.is("td,tr,tbody"))b=d.parents("table:first")[0];else{e=d.find("table:only-child");if(a.browser.msie&&e.length)b=e[0];else{c(this.localizeString("errorMessageSelectTableError","Please select a table!"));return false}}bc=b;return true},initPreviewDialog:function(){var a=this,b=a.dialog;a._setPreviewContent(0);b.delegate("#rad640_480","click."+a.widgetName,function(){a._setPreviewDialogSize(640,480)}).delegate("#rad800_600","click."+a.widgetName,function(){a._setPreviewDialogSize(800,600)}).delegate("#rad1024_768","click."+a.widgetName,function(){a._setPreviewDialogSize(1024,768)}).delegate("#chkSplit","click."+a.widgetName,function(){a._splitPreviewPages(this.checked)}).delegate("."+Gc,"click."+a.widgetName,function(){a._printPreviewPage(true)}).delegate("."+Hc,"click."+a.widgetName,function(){a._printPreviewPage(false)}).delegate("."+cd,"click."+a.widgetName,function(){a._closeDialog()}).delegate("."+Wc,"click."+a.widgetName,function(){a._navigatePreviewPage(false)}).delegate("."+Vc,"click."+a.widgetName,function(){a._navigatePreviewPage(true)})},_setPreviewContent:function(d){var b=this,f=b.dialog,g=a("iframe",f),e=a("."+vb+" span",f),c=g[0].contentWindow.document;c.open();if(d===-1){c.write(b._getPreviewAllPageContent());e.html("1 / 1")}else{c.write(b._getPreviewPageContent(d));e.html(d+1+" / "+b._getPreviewPageCount())}c.close()},_setPreviewDialogSize:function(g,f){var h=this,b=h.dialog,c=a("iframe",b),e=b.wijdialog("option","width"),d=b.wijdialog("option","height");if(e==="auto")e=b.parent(".wijmo-wijdialog").width()-c.width();else e=e-c.width();if(d==="auto")d=b.parent(".wijmo-wijdialog").height()-c.height();else d=d-c.height();c.css("width",g).css("height",f);b.wijdialog("option",{width:g+e,height:f+d})},_getPreviewPageCount:function(){return this._getPreviewPages().length},_getPreviewPageContent:function(a){var b=this._getPreviewPages();return b.length>a?b[a]:null},_getPreviewAllPageContent:function(){return this._getDesignViewText()},_getPreviewPages:function(){var b=this._getPreviewAllPageContent(),c=new RegExp("<(DIV|div)[^>]*(page-break-before|PAGE-BREAK-BEFORE)[ ]*:[ ]*always[^>]*>(.*?)<\\/(DIV|div)>","g"),a=b.replace(c,"!-~U^n#i@q,P|.a=g~e+br!");return a.split("!-~U^n#i@q,P|.a=g~e+br!")},_curPageIdx:0,_splitPreviewPages:function(f){var b=this,e=b.dialog,c=a("."+Ac,e),d=a("."+vb,e);if(f){b._setPreviewContent(0);d.show();c.hide()}else{b._setPreviewContent(-1);d.hide();c.show()}b._curPageIdx=0},_navigatePreviewPage:function(f){var c=this,e=a("#chkSplit",c.dialog),b=c._curPageIdx,d=c._getPreviewPageCount();if(e.is(":checked")){if(f){b++;if(b<d)c._setPreviewContent(b);else b=d-1}else{b--;if(b>=0)c._setPreviewContent(b);else b=0}c._curPageIdx=b}},_printPreviewPage:function(f){var c=this,b=c.dialog,e=a("#chkSplit",b),d=a("iframe",b)[0].contentWindow;if(f){e.removeAttr("checked");c._setPreviewContent(-1)}d.focus();d.print()},initCleanUpDialog:function(){var b=this,c=b.dialog;a("textarea",c).val(b.sourceView.val());c.delegate(k,"click."+b.widgetName,function(a){b.submitCleanUpDialog();b._onDesignViewBlur(a)}).delegate(q,"click."+b.widgetName,function(){b._closeDialog()})},submitCleanUpDialog:function(){var e=this,d=e.dialog,f=e.sourceView,b=f.val(),c;if(a("#replaceSpans",d).is(":checked")){c=new RegExp("<\\/?SPAN[^>]*>","g");b=b.replace(c,"")}if(a("#replaceClass",d).is(":checked")){c=new RegExp("<(\\w[^>]*) class=([^ |>]*)([^>]*)","g");b=b.replace(c,"<$1$3")}if(a("#replaceStyle",d).is(":checked")){c=new RegExp('<(\\w[^>]*) style="([^"]*)"([^>]*)',"g");b=b.replace(c,"<$1$3");c=new RegExp("<(\\w[^>]*) lang=([^ |>]*)([^>]*)","g");b=b.replace(c,"<$1$3");c=new RegExp("<\\\\?\\?xml[^>]*>","g");b=b.replace(c,"");c=new RegExp("<\\/?\\w+:[^>]*>","g");b=b.replace(c,"")}if(a("#replaceNbsp",d).is(":checked")){c=new RegExp("&nbsp;","g");b=b.replace(c," ")}if(a("#transformPtoDiv",d).is(":checked")){c=new RegExp("(<P)([^>]*>.*?)(<\\/P>)","g");b=b.replace(c,"<div$2</div>")}f.val(b);e._setDesignViewText(b);e._addtoUndoBuffer();e._closeDialog()},initFindDialog:function(){var a=this,b=a.dialog;if(a.tRange)a.tRange=null;b.delegate(k,"click."+a.widgetName,function(){a.submitFindAction()}).delegate(q,"click."+a.widgetName,function(b){a.submitReplaceAction();a._onDesignViewBlur(b)})},submitFindAction:function(){var b=this,c=a("textarea:first",b.dialog).val();if(a.trim(c)==="")return;b._findAndReplaceString(c)},submitReplaceAction:function(){var f=this,e=f.dialog,b=a("textarea:first",e).val(),d=a("textarea:last",e).val();if(a.trim(b)==="")return;if(a.trim(d)===""){c(this.localizeString("errorMessageReplaceStringError","please input replace string!"));return}f._findAndReplaceString(b,d)},tRange:null,txtFoundInIE:false,txtFoundInNoneIE:false,_findAndReplaceString:function(e,f){var b=this,h=b._getDesignViewWindow(),d=0,g=false,i=f&&f!==e;if(!f)f=e;if(a.browser.msie){if(b.tRange)if(b.txtFoundInIE&&i){b.tRange.pasteHTML(f);b.tRange=null;g=true;b.txtFoundInIE=false}else{b.tRange.collapse(false);d=b.tRange.findText(e);d&&b.tRange.select()}if(!g&&(!b.tRange||!d)){b.tRange=h.document.body.createTextRange();d=b.tRange.findText(e);if(d){b.tRange.select();if(i){b.tRange.pasteHTML(f);b.tRange=null;g=true}}}}else{if(b.txtFoundInNoneIE&&i){b._replaceSelectionForNoneIE(f);g=true;b.txtFoundInNoneIE=false}else{d=h.find(e);if(!d){d=h.find(e,0,1);while(h.find(e,0,1))continue}}b.txtFoundInNoneIE=b.txtFoundInNoneIE||d;if(b.txtFoundInNoneIE&&i){b._replaceSelectionForNoneIE(f);g=true;b.txtFoundInNoneIE=false}}if(!d&&!g){c('"'+e+'" String Not Found');b.tRange=null;b.txtFoundInNoneIE=false;b.txtFoundInIE=false}else b.txtFoundInIE=true},_replaceSelectionForNoneIE:function(d){var a=this._getDesignViewDocument(),b="insert_html_"+Math.round(Math.random()*1e8),c=new RegExp("<[^<]*"+b+"[^>]*>");a.execCommand("insertimage",false,b);a.body.innerHTML=a.body.innerHTML.replace(c,d)},initMediaDialog:function(){var a=this,b=a.dialog;b.delegate(k,"click."+a.widgetName,function(b){a.submitMediaDialog();a._onDesignViewBlur(b)}).delegate(q,"click."+a.widgetName,function(){a._closeDialog()})},submitMediaDialog:function(){var b=this,d=b.dialog,h=a("select",d).val(),e=a("."+fd+" input",d).val(),g=a("."+ad+" input",d).val(),f=a("."+Uc+" input",d).val();if(e===""){c(this.localizeString("errorMessageUrlEmptyError","URL is empty!"));return}if(!b._isUrl(e)){c(this.localizeString("errorMessageUrlCorrectError","please input correct URL!"));return}if(!b._isNumeric(g)){c(this.localizeString("errorMessageMediaWidthError","please input width of the media!"));return}if(!b._isNumeric(f)){c(this.localizeString("errorMessageMediaHeightError","please input height of the media!"));return}b._insertMedia(h,e,g,f);b._closeDialog()},_insertMedia:function(f,d,c,b){var e=this,a="";e._setIESelection();switch(f){case"video":a+='<embed src="'+d+'" width="'+c+'" height="'+b+'" type=audio/x-pn-realaudio-plugin console="Clip1" controls="IMAGEWINDOW,ControlPanel,StatusBar" autostart="true"></embed>';break;case"flash":a+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,29,0" width="'+c+'" height="'+b+'">';a+='<param name="movie" value="'+d+'">';a+='<param name="quality" value="high">';a+='<embed src="'+d+'" quality="high" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" width="'+c+'" height="'+b+'"></embed>';a+="</object>";break;case"applet":a+='<applet code="'+d+'" width="'+c+'" height="'+b+'"></applet>';break;case"other":a+='<embed src="'+d+'" width="'+c+'" height="'+b+'"></embed>'}e.insertHTML(a)},initSpecialCharacterDialog:function(){var b=this,d=b.dialog,c=a("."+Bc+" span",d);d.delegate("label","click."+b.widgetName,function(a){b.submitSpecialCharacterDialog(this);b._onDesignViewBlur(a)}).delegate(k,"click."+b.widgetName,function(){b._closeDialog()}).delegate("label","mouseover."+b.widgetName,function(){c.html(a(this).html())}).delegate("label","mouseout."+b.widgetName,function(){c.empty()})},submitSpecialCharacterDialog:function(c){var b=this;b._setIESelection();b.insertHTML(a(c).html());b._closeDialog()},_setSaveBtnEnabled:function(){this.$ribbon.wijribbon(C,vc,false)},_undoAction:function(){var b=this._getDesignViewDocument().body,a={};i--;if(i<=0)i=0;b.innerHTML=A[i];if(!i){a[D]=true;a[I]=false;this.$ribbon.wijribbon(Jb,a)}else this.$ribbon.wijribbon(C,I,false)},_redoAction:function(){var c=this._getDesignViewDocument().body,b=A.length,a={};i++;if(i>=b-1)i=b-1;c.innerHTML=A[i];if(i===b-1){a[D]=false;a[I]=true;this.$ribbon.wijribbon(Jb,a)}else this.$ribbon.wijribbon(C,D,false)},_addtoUndoBuffer:function(){for(var b=A.length-1-i,a=0;a<b;a++)A.pop();i++;A.push(this._getDesignViewText());this.$ribbon.wijribbon(C,D,false)},_deleteSelectionContent:function(){var e=this._getDesignViewWindow(),b,c,d,f="rangeCount";if(a.browser.msie){b=e.document.selection;b.type.toLowerCase()!=="none"&&b.clear()}else{b=e.getSelection();for(c=0;c<b[f];c++){d=b.getRangeAt(c);d.deleteContents()}}},_refreshPathSelector:function(){var e=this,d=e._getParentElement(e._getDesignViewWindow()),c=e._getPathSelector(),f=a(d).parents(),h=f.length,g="wijmo-wijeditor-label ui-state-default ui-corner-all",b;if(!d)return;c.empty();for(b=h-1;b>=0;b--)c.append("<label class='"+g+"'>&lt;"+f[b].tagName.toLowerCase()+"&gt;</label>");c.append("<label class='"+g+" wijmo-wijeditor-selectlabel ui-state-highlight ui-corner-all'>&lt;"+d.tagName.toLowerCase()+"&gt;</label>")},_toggleTableBorders:function(){var c=this._getDesignViewDocument(),b=a("#__wijStyle",c);Z=!Z;if(a.browser.safari)if(Z)b.html("table,td,tr{border: 1px #acacac dashed;}");else b.empty();else b.attr("disabled",!Z)},_tableAction:function(j){var b=this,o=b._getParentElement(b._getDesignViewWindow()),k=a(o).closest("td"),l,n,q,f,d,h,g,i,m,p,e=0;b._setSaveBtnEnabled();if(k.length===0&&j!==N)return false;else if(j!==N){l=k.parent();n=l.closest("table");q=k[0];f=l[0];d=n[0];h=f.rowIndex;g=q.cellIndex}try{switch(j){case ec:i=f.cells.length;p=d.insertRow(h);for(e=0;e<i;e++)b._insertCell(p,e);break;case fc:d.deleteRow(h);break;case Nb:m=d.rows.length;for(e=0;e<m;e++)b._insertCell(d.rows[e],g);break;case Ob:b._removeColumn(d,g);break;case Xb:b._insertCell(f,g+1);break;case Zb:i=f.cells.length;if(i===1)d.deleteRow(h);else f.deleteCell(g);break;case gc:b._splitCell(d,f,h,g);break;case N:b._mergeCell(b._getSelectedCells(o))}this._addtoUndoBuffer()}catch(r){c(r.message);return false}return true},_removeColumn:function(e,h){var i=e.rows.length,f=0,g,c,a,b,d;while(f<i){g=e.rows[f];c=g.cells;a=c.length;b=h>a-1?a-1:h;d=c[b].colSpan;if(d>1&&a>1)if(b+1<a)c[b+1].colSpan+=d-1;else c[b-1].colSpan+=d+1;if(a===1){e.deleteRow(f);i=e.rows.length}else{g.deleteCell(b);f++}}},_splitCell:function(j,h,l,e){var k=j.rows.length,a=0,i=0,f,d,b,g,c;while(a<=e){if(h.cells[a].colSpan>1)i+=h.cells[a].colSpan-1;a++}this._insertCell(h,e+1);for(b=0;b<k;b++){f=j.rows[b];if(b!==l){g=e;a=0;d=0;while(a<=g){if(f.cells[a].colSpan>1){d+=f.cells[a].colSpan-1;g-=d}a++}c=e+i-d;if(c<0)c=0;f.cells[c].colSpan++}}},_mergeCell:function(b){var e=b.length,c,a,f,d;if(e<2||b[0].parentNode!==b[e-1].parentNode)return false;c=b[0].parentNode;a=b[0].cellIndex;f=a+e;for(d=a+1;d<f;d++){c.cells[a].innerHTML+=c.cells[a+1].innerHTML;c.cells[a].colSpan++;c.deleteCell(a+1)}},_getSelectedCells:function(k){var j=this._getDesignViewWindow(),m=j.document,e=[],b,d,h,c,f,g,i,l;if(a.browser.msie){b=m.selection.createRange();d=a(k).closest("tr")[0];d&&a.each(d.cells,function(f,d){var a=m.selection.createRange(),c="compareEndPoints";a.moveToElementText(d);(b.inRange(a)||b[c]("StartToStart",a)>=0&&b[c]("StartToEnd",a)<=0||b[c]("EndToStart",a)>=0&&b[c]("EndToEnd",a)<=0)&&e.push(d)})}else if(a.browser.mozilla){h=j.getSelection();f=h.rangeCount;for(c=0;c<f;c++){b=h.getRangeAt(c);g=b.startContainer;i=g.nodeName.toLowerCase();if(i==="td"||i==="th")e.push(g);else if(i==="tr"){l=b.startOffset;e.push(g.cells[l])}}}else{h=j.getSelection();d=a(k).closest("tr")[0];if(d){f=d.cells.length;for(c=0;c<f;c++)e.push(d.cells[c])}}return e},insertDateAndTime:function(){var a=new Date;if(this.options.culture&&this.options.culture!=="")this.insertHTML(Globalize.format(a,"dddd ",Globalize.findClosestCulture(this.options.culture))+Globalize.format(a,"F",Globalize.findClosestCulture(this.options.culture)));else this.insertHTML(a.toDateString()+" "+a.toTimeString())},_toggleWordWrap:function(){var d=this,b=d.sourceView,e="wrap",c;xc=!xc;c=xc?"soft":"off";b.attr(e,c);b[0].focus();if(a.browser.mozilla){b.hide();j.setTimeout(function(){b.show()},40)}},insertHTML:function(d){var c=this,e=c._getDesignViewDocument(),b;try{if(a.browser.msie){b=e.selection.createRange();b.pasteHTML(d);b.collapse(false);b.select()}else e.execCommand("insertHTML",false,d)}catch(f){}c._addtoUndoBuffer();c._setSaveBtnEnabled()},_getSelectedContent:function(){var g=this._getDesignViewWindow(),f=g.document,c="",d="cloneContents",a,e,b;if(!f.selection){a=g.getSelection().getRangeAt(0);if(a)if(a[d]){e=a[d]();b=document.createElement("div");b.appendChild(e);c=b.innerHTML;b=null}}else{a=f.selection.createRange();return a.htmlText}return c||""},_setIESelection:function(){a.browser.msie&&H&&H.select()},_setIEFocus:function(){var b=this._getDesignViewDocument();if(a.browser.msie)try{b.body.focus()}catch(c){}},focus:function(){var b=this._getDesignViewWindow(),c=b.document;if(a.browser.msie)if(!H)c.body.focus();else H.select();else b.focus()},_getInspectElement:function(){return bc||this._getSelectedElement()},_getSelectedElement:function(){return this._getParentElement(this._getDesignViewWindow())},_createElement:function(c,a,b){return new kb(c,a,b)},_createDiv:function(a){return this._createElement("div",{"class":a})},_createSpan:function(a,b){var c=this;return!b?c._createElement("span",{"class":a}):a.length===0?c._createElement("span",b):this._createElement("span",b,{"class":a})},_createTextBox:function(c,b){var a={"class":c,type:"text"};if(b)a.value=b;return this._createElement("input",a)},_createLabel:function(b,a){return a?new kb("label",b,{"for":a}):new kb("label",b)},_createRadio:function(d,c,b){var a={name:c,id:d,value:b,type:"radio"};return this._createElement("input",a)},_createCheckbox:function(b){var a={type:"checkbox",id:b};return this._createElement("input","",a)},_createSelect:function(d,e){var c=this,f={"class":d},b=c._createElement("select",f);if(d==="")b=c._createElement("select");a.each(e,function(e,d){if(a.isPlainObject(d)&&d.selected)b.add(c._createElement("option",d.text,{selected:"selected"}));else b.add(c._createElement("option",d))});return b},_createInputButton:function(c,b){var a={"class":c,type:"button"};if(b)a.value=b;return this._createElement("input",a)},_createTextField:function(h,f,e,c){var b=this,a=b._createDiv(f),d={type:"text"};if(c)d.value=c;a.add(b._createSpan(g,h));a.add(b._createElement("input",d));e&&a.add(new Hf(e));return a},_createSeparator:function(){var b=this,a=b._createDiv(If);a.add(b._createElement("hr"));return a},_createOKCancelButtons:function(){var b=this,a=b._createDiv(w);a.add(b._createElement("input",{type:"button","class":n,value:this.localizeString("dialogOK","OK")}));a.add(b._createElement("input",{type:"button","class":n,value:this.localizeString("dialogCancel","Cancel")}));return a},_getDialogRes_Template:function(){var a=this,b=a._createDiv(f),e=a._createDiv(Ff),h=a._createDiv(vf),m=a._createDiv(Gf),l=a._createDiv(wf),i=a._createDiv(yf),j=a._createElement("div",this.localizeString("templateDialogName","Name :")),k=a._createElement("div",this.localizeString("templateDialogDescription","Description :")),c=a._createDiv(Ef),d=a._createDiv(uf);e.add(a._createElement("div",this.localizeString("templateDialogSelectTemplate","Select Template:"),{"class":xf}));e.add(a._createElement("div",this.localizeString("templateDialogTemplatePreview","Template Preview:"),{"class":zf}));b.add(e);m.add(a._createElement("select",{size:8}));l.add(a._createElement("iframe",{frameborder:0}));h.add(m);h.add(l);b.add(h);j.add(a._createSpan(Rb));k.add(a._createSpan(Vb));i.add(j);i.add(k);b.add(i);c.add(a._createSpan(g,this.localizeString("templateDialogName","Name :")));c.add(a._createTextBox(L));c.add(a._createSpan(g,this.localizeString("templateDialogDescription","Description :")));c.add(a._createTextBox(Y));b.add(c);d.add(a._createInputButton(n+" "+pd,this.localizeString("templateDialogDeleteSelected","Delete selected")));d.add(a._createInputButton(n+" "+xd,this.localizeString("templateDialogSaveCurrentPage","Save current page as template")));b.add(d);b.add(a._createSeparator());b.add(a._createOKCancelButtons());return b.render()},_getDialogRes_ImageBrowser:function(){var a=this,g=a._createDiv(l),c=a._createDiv(Le),b=a._createDiv(Ve),d=a._createDiv(Qb),f=a._createDiv(kf),e=a._createDiv(Me);b.add(a._createTextField(this.localizeString("imageEditorDialogImageSrc","Image Src:"),db));b.add(a._createTextField(this.localizeString("imageEditorDialogImageAltText","Image alt text:"),nd));b.add(a._createTextField(this.localizeString("imageEditorDialogImageWidth","Image width:"),X,this.localizeString("dialogPixel","px")));b.add(a._createTextField(this.localizeString("imageEditorDialogImageHeight","Image height:"),T,this.localizeString("dialogPixel","px")));b.add(a._createTextField(this.localizeString("imageEditorDialogCssText","Css text:"),od));c.add(b);d.add(f);f.add(a._createElement("select",{size:8}));d.add(e);e.add(a._createElement("img",{src:"",alt:""}));c.add(d);c.add(a._createSeparator());c.add(a._createOKCancelButtons());g.add(c);return g.render()},_getDialogRes_Link:function(){var b=this,c=b._createDiv(h),t=b._createTextField(this.localizeString("hyperLinkDialogAddress","Address :"),K),j=b._createDiv(Pc+" ui-helper-clearfix"),i=b._createElement("div"),e=b._createDiv(tb),l=b._createDiv(Ec),d=b._createElement("div"),s=[{id:"radUrl",value:"url",text:this.localizeString("hyperLinkDialogUrl","url")},{id:"radAnchor",value:"anchor",checked:true,text:this.localizeString("hyperLinkDialogAnchor","anchor")},{id:"radMail",value:"email",text:this.localizeString("hyperLinkDialogEmail","email")}],o=[{id:"radLinkTypeIsText",value:"text",checked:true,text:this.localizeString("hyperLinkDialogText","text")},{id:"radLinkTypeIsImage",value:"image",text:this.localizeString("hyperLinkDialogImage","image")}],m=[],u=b._createTextField(this.localizeString("hyperLinkDialogTextToDisplay","Text to display :"),G),n=b._createSpan(g,this.localizeString("hyperLinkDialogIconType","Icon Type :")),k=b._createDiv(S),r=b._createSpan(g,this.localizeString("hyperLinkDialogTarget","Target :")),p=[{text:"_blank",selected:true},"_parent","_self","_top"],q=b._createSelect(S,p),v=b._createTextField(this.localizeString("hyperLinkDialogCss","Css :"),Ub),f;e.add(b._createTextField(this.localizeString("imageEditorDialogImageSrc","Image Src:"),M));e.add(b._createTextField(this.localizeString("imageEditorDialogImageWidth","Image width:"),U,this.localizeString("dialogPixel","px")));e.add(b._createTextField(this.localizeString("imageEditorDialogImageHeight","Image height:"),R,this.localizeString("dialogPixel","px")));c.add(t);c.add(j);j.add(i);l.add(d);d.add(n);a.each(s,function(c,a){i.add(b._createRadio(a.id,"radioList",a.value));i.add(b._createLabel(a.text,a.id))});a.each(o,function(c,a){d.add(b._createRadio(a.id,"linkIconRadioList",a.value));d.add(b._createLabel(a.text,a.id))});for(f=1;f<8;f++)m.push("#anchor"+f.toString());j.add(b._createSelect(Hb,m));c.add(b._createSeparator());c.add(l);c.add(u);c.add(e);c.add(k);k.add(r);k.add(q);c.add(v);c.add(b._createSeparator());c.add(b._createOKCancelButtons());return c.render()},_getDialogRes_TagInspector:function(){var a=this,b=a._createDiv(s),f=a._createDiv(te),c=a._createDiv(Sd),e=a._createDiv(se),d=a._createDiv(zb);b.add(f);f.add(a._createSpan(ne,this.localizeString("tagInspectorDialogSelectedTag","Selected tag :")));f.add(a._createSpan(Nc,""));b.add(c);c.add(a._createCheckbox("displayNoEmpty"));c.add(a._createLabel(this.localizeString("tagInspectorDialogDisplayNotEmptyAttributes","Display not empty attributes only"),"displayNoEmpty"));b.add(e);e.add(a._createSpan(g,this.localizeString("tagInspectorDialogAttributes","Attributes:")));e.add(a._createDiv(Q));b.add(d);d.add(a._createSpan(g,this.localizeString("tagInspectorDialogInnerHTML","Inner HTML:")));d.add(a._createElement("textarea"));b.add(a._createTextField(this.localizeString("tagInspectorDialogCSSText","Css Text:"),Lb));b.add(a._createSeparator());b.add(a._createOKCancelButtons());return b.render()},_getDialogRes_Color:function(){return this._getDialogRes_CommonColor("#FFFFFF")},_getDialogRes_ForeColor:function(){return this._getDialogRes_CommonColor("#000000")},_getDialogRes_BackColor:function(){return this._getDialogRes_CommonColor("#FFFFFF")},_getDialogRes_CommonColor:function(d){var a=this,b=a._createDiv(kc),c=a._createDiv(B);b.add(a._createDiv(Eb));b.add(c);c.add(a._createSpan(g,this.localizeString("backColorDialogSelectedColor","Selected Color:")));c.add(a._createElement("input",{type:"text",value:d}));b.add(a._createSeparator());b.add(a._createOKCancelButtons());return b.render()},_getDialogRes_Table:function(){var a=this,b=a._createDiv(p),c=a._createDiv(E);b.add(a._createTextField(this.localizeString("tableDialogRows","Rows :"),Kb,"",3));b.add(a._createTextField(this.localizeString("tableDialogColumns","Columns :"),Cb,"",3));b.add(a._createTextField(this.localizeString("tableDialogTableWidth","Table Width :"),Ib,this.localizeString("tableDialogPixels","pixels"),200));b.add(a._createTextField(this.localizeString("tableDialogTableHeight","Table Height :"),Gb,this.localizeString("tableDialogPixels","pixels"),200));b.add(a._createTextField(this.localizeString("tableDialogBorder","Border thickness:"),Fb));b.add(a._createTextField(this.localizeString("tableDialogCellPadding","Cell Padding :"),xb));b.add(a._createTextField(this.localizeString("tableDialogCellSpacing","Cell Spacing :"),yb));b.add(a._createTextField(this.localizeString("tableDialogCssText","Css Text :"),Db));b.add(c);c.add(a._createSpan(g,this.localizeString("tableDialogBackgroundColor","Background Color:")));c.add(a._createElement("input",{type:"text"}));c.add(a._createElement("input",{type:"button",value:"..."}));b.add(a._createSeparator());b.add(a._createOKCancelButtons());return b.render()},_getDialogRes_Preview:function(){var a=this,c=a._createDiv(o),b=a._createDiv(ee),e=a._createDiv(w),d=a._createDiv(vb),f=a._createDiv(Od);c.add(b);b.add(a._createSpan(g,this.localizeString("previewDialogPreviewSize","Preview Size:")));b.add(a._createElement("input",{id:"rad640_480",name:"preview",type:"radio",checked:"checked"}));b.add(a._createLabel("640x480","rad640_480"));b.add(a._createElement("input",{id:"rad800_600",name:"preview",type:"radio"}));b.add(a._createLabel("800x600","rad800_600"));b.add(a._createElement("input",{id:"rad1024_768",name:"preview",type:"radio"}));b.add(a._createLabel("1024x768","rad1024_768"));b.add(a._createElement("input",{id:"chkSplit",type:"checkbox",checked:"checked"}));b.add(a._createLabel(this.localizeString("previewDialogSplit","Split pages"),"chkSplit"));c.add(a._createSeparator());c.add(e);e.add(a._createInputButton(n+" "+Gc,this.localizeString("previewDialogPrintAll","Print All")));e.add(a._createInputButton(n+" "+Hc,this.localizeString("previewDialogPrintPage","Print Page")));e.add(a._createInputButton(n+" "+cd,this.localizeString("dialogOK","OK")));c.add(a._createSeparator());c.add(d);d.add(a._createElement("a",this.localizeString("previewDialogPrevPage","Prev page"),{"class":Wc,href:"#"}));d.add(a._createElement("span","1 / 1"));d.add(a._createElement("a",this.localizeString("previewDialogNextPage","Next page"),{"class":Vc,href:"#"}));c.add(a._createDiv(Ac));c.add(f);f.add(a._createElement("iframe",{src:"about:blank"}));return c.render()},_getDialogRes_CleanUp:function(){var b=this,c=b._createDiv(cb),e=b._createDiv(de),f=b._createDiv(Vd),d=b._createDiv(ce),h=[{id:"replaceSpans",label:this.localizeString("cleanUpDialogStripSpanTag","Strip SPAN tag")},{id:"replaceClass",label:this.localizeString("cleanUpDialogStripClass","Strip CLASS tag")},{id:"replaceStyle",label:this.localizeString("cleanUpDialogStripStyle","Strip STYLE attribute")},{id:"replaceNbsp",label:this.localizeString("cleanUpDialogReplaceSymbol","Replace &amp;nbsp; symbol")},{id:"transformPtoDiv",label:this.localizeString("cleanUpDialogTransformParagraphToDIV","Transform Paragraph to DIV")}];c.add(e);e.add(b._createSpan(g,this.localizeString("cleanUpDialogDocumentSource","Document source :")));c.add(f);f.add(b._createElement("textarea",{readonly:"readonly"}));c.add(d);a.each(h,function(c,a){d.add(b._createCheckbox(a.id));d.add(b._createLabel(a.label,a.id))});c.add(b._createSeparator());c.add(b._createOKCancelButtons());return c.render()},_getDialogRes_FindAndReplace:function(){var a=this,b=a._createDiv(nc),e=a._createDiv(ef),d=a._createDiv(Ee),c=a._createDiv(w);b.add(e);e.add(a._createSpan(g,this.localizeString("findAndReplaceFind","Find:")));e.add(a._createElement("textarea","text"));b.add(d);d.add(a._createSpan(g,this.localizeString("findAndReplaceReplace","Replace:")));d.add(a._createElement("textarea"));b.add(a._createSeparator());b.add(c);c.add(a._createInputButton(n,this.localizeString("findAndReplaceFindButton","Find")));c.add(a._createInputButton(n,this.localizeString("findAndReplaceReplaceButton","Replace")));return b.render()},_getDialogRes_Media:function(){var a=this,b=a._createDiv(P),c=a._createDiv(We);b.add(c);c.add(a._createSpan(g,this.localizeString("mediaDialogMediaType","Media Type :")));c.add(a._createSelect("",["flash","video","applet","other"]));b.add(a._createTextField(this.localizeString("mediaDialogMediaUrl","Media Url :"),fd));b.add(a._createTextField(this.localizeString("mediaDialogWidth","Width :"),ad,this.localizeString("dialogPixel","px"),200));b.add(a._createTextField(this.localizeString("mediaDialogHeight","Height :"),Uc,this.localizeString("dialogPixel","px"),200));b.add(a._createSeparator());b.add(a._createOKCancelButtons());return b.render()},_getDialogRes_SpecialCharacter:function(){var b=this,c=b._createDiv(r),e=b._createDiv(Ud),m=b._createDiv(Qd),l=b._createDiv(Bc),d=b._createDiv(be),f=b._createDiv(wb,"Punctuation"),i=b._createDiv(Md),p=["&#8211;","&#8212;","&iexcl;","&iquest;","&quot;","&laquo;","&raquo;","&nbsp;"],h=b._createDiv(wb,"Symbols"),o=b._createDiv(Rd),s=["&amp;","&cent;","&copy;","&divide;","&gt;","&lt;","&micro;","&#8226;","&para;","&plusmn;","&#8364;","&pound;","&reg;","&sect;","&yen;"],g=b._createDiv(wb,"Diacritics"),j=b._createDiv(Nd),q=["&aacute;","&Aacute;","&agrave;","&Agrave;","&acirc;","&Acirc;","&aring;","&Aring;","&atilde;","&Atilde;","&auml;","&Auml;","&aelig;","&AElig;","&ccedil;","&Ccedil;","&eacute;","&Eacute;","&egrave;","&Egrave;","&ecirc;","&Ecirc;","&euml;","&Euml;","&iacute;","&Iacute;","&igrave;","&Igrave;","&icirc;","&Icirc;","&iuml;","&Iuml;","&ntilde;","&Ntilde;","&oacute;","&Oacute;","&ograve;","&Ograve;","&ocirc;","&Ocirc;","&oslash;","&Oslash;","&otilde;","&Otilde;","&ouml;","&Ouml;","&uacute;","&Uacute;","&ugrave;","&Ugrave;","&ucirc;","&Ucirc;","&uuml;","&Uuml;","&szlig;","&yuml;","&#8216;","&#8217;"],k=b._createDiv(w);c.add(e);e.add(m);m.add(l);l.add(new kb("span"));e.add(d);d.add(f);f.add(i);a.each(p,function(c,a){i.add(b._createLabel(a))});d.add(h);h.add(o);a.each(s,function(c,a){o.add(b._createLabel(a))});d.add(g);g.add(j);a.each(q,function(c,a){j.add(b._createLabel(a))});c.add(b._createSeparator());k.add(b._createInputButton(n,"Cancel"));c.add(k);return c.render()},_copyFromClipboard:function(){var d,c,b={},e={};if(j.clipboardData)return j.clipboardData.getData("Text");else if(a.browser.mozilla){try{netscape.security.PrivilegeManager.enablePrivilege&&netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(f){}d=Components.classes["@mozilla.org/widget/clipboard;1"].getService(Components.interfaces.nsIClipboard);if(!d)return false;c=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!c)return false;c.addDataFlavor("text/unicode");d.getData(c,d.kGlobalClipboard);c.getTransferData("text/unicode",b,e);if(b)b=b.value.QueryInterface(Components.interfaces.nsISupportsString);return b?b.data.substring(0,e.value/2):""}},_copyToClipboard:function(e){var f,d,g,b={},h={};if(j.clipboardData&&e)j.clipboardData.setData("Text",e);else if(a.browser.mozilla)try{netscape.security.PrivilegeManager.enablePrivilege&&netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");f=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!f)return;d=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!d)return;d.addDataFlavor("text/unicode");b={};h={};b=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);b.data=e;d.setTransferData("text/unicode",b,e.length*2);g=Components.interfaces.nsIClipboard;if(!f)return false;f.setData(d,null,g.kGlobalClipboard)}catch(i){b="Copy text to Clipboard \n";b+="If you are using firefox please do the following :\n ";b+="1. Write in your url box : 'about:config'\n";b+="2. Change signed.applets.codebase_principal_support = true\n";c(this.localizeString("errorMessageCopyToClipboardError",b))}},fixAbsoluteUrlsIfNeeded:function(o){for(var g=this,n=zc.URL,b=zc.URL,f=zc.URL,i=false,p=b.length,a=o,d,j,k,c,l,m,h,e=p-1;e>0;e--){d=b.charAt(e);j=b.charAt(e-1);if(d==="/"||d==="\\"){if(d===j)break;f=b.substring(0,e)+d;if(!i){b=f;i=true}}}k=g._prepareLiteralRegexText(n+"?");c=new RegExp(k,"g");a=a.replace(c,"?");l=g._prepareLiteralRegexText(b);c=new RegExp(l,"g");a=a.replace(c,"");m=g._prepareLiteralRegexText(f);c=new RegExp(m,"g");a=a.replace(c,"/");h=a.indexOf("#");if(h>-1)a=a.substr(h);return a},_insertCell:function(c,b){var a=c.insertCell(b);a.innerHTML="&nbsp;";return a},_getDictionaryDeclare:function(){var a={};a.a=["accesskey","charset","class","coords","dir","href","hreflang","id","lang","name","rel","rev","shape","tabindex","target","title"];a.b=["class","dir","id","lang","title"];a.body=["alink","background","bgColor","bgproperties","bottommargin","class","dir","id","lang","leftmargin","link","marginheight","marginwidth","rightmargin","text","title","topmargin","vlink"];a.button=["accesskey","class","dir","disabled","id","lang","name","tabindex","title","type","value"];a.code=["class","dir","id","lang","title"];a.div=["align","class","dir","id","lang","title"];a.em=["class","dir","id","lang","title"];a.font=["class","color","dir","face","id","lang","pointsize","size","title"];a.form=["action","class","dir","enctype","id","lang","method","name","runat","target","title"];a.hr=["align","class","color","id","noshade","size","title","width"];a.i=["class","dir","id","lang","title"];a.img=["align","alt","border","class","controls","dir","dynsrc","height","hspace","id","ismap","lang","longdesc","loop","lowsrc","name","src","start","title","usemap","vspace","width"];a.input=["accept","accesskey","align","alt","border","checked","class","dir","disabled","height","hspace","id","lang","maxlength","name","readonly","size","src","tabindex","title","type","usemap","value","vspace","width"];a.label=["accesskey","class","dir","for","id","lang","title"];a.li=["class","dir","id","lang","title","type","value"];a.ol=["class","compact","dir","id","lang","start","title","type"];a.option=["class","dir","disabled","id","label","lang","selected","title","value"];a.p=["align","class","dir","id","lang","title"];a.span=["class","dir","id","lang","title"];a.strong=["class","dir","id","lang","title"];a.select=["accesskey","class","dir","disabled","id","lang","multiple","name","size","tabindex","title"];a.table=["align","background","bgColor","border","bordercolor","bordercolordark","bordercolorlight","cellpadding","cellspacing","class","cols","datapagesize","dir","frame","height","hspace","id","lang","rules","summary","title","vspace","width"];a.td=["abbr","align","axis","background","bgColor","bordercolor","bordercolordark","bordercolorlight","class","colspan","dir","headers","height","id","lang","nowrap","rowspan","scope","title","valign","width"];a.th=["abbr","align","axis","background","bgColor","bordercolor","bordercolordark","bordercolorlight","class","colspan","dir","headers","height","id","lang","nowrap","rowspan","scope","title","valign","width"];a.tr=["align","bgColor","bordercolor","bordercolordark","bordercolorlight","class","dir","height","id","lang","nowrap","title","valign"];a.tbody=["align","bgColor","class","dir","id","lang","title","valign"];a.textarea=["accesskey","class","cols","dir","disabled","id","label","lang","name","readonly","rows","tabindex","title","wrap"];a.u=["class","id","xml:lang"];a.ul=["class","compact","dir","id","lang","title","type"];return a},_getParentElement:function(e){var h=this,a=h._getRange(e),b,f,g,c,d;if(!a)return null;if(a.commonAncestorContainer){b=e.getSelection();f=a.startContainer||b.baseNode;g=a.endContainer||b.extentNode;c=a.startOffset;if(c===null)c=b.baseOffset;d=a.endOffset;if(d===null)d=b.extentOffset;return f===g&&d-c===1?b.anchorNode.childNodes[b.anchorOffset]:!a.commonAncestorContainer.tagName?e.document===a.commonAncestorContainer&&b.baseNode?b.baseNode.parentNode:a.commonAncestorContainer.parentNode:a.commonAncestorContainer}return a.length?a.item(0):a.parentElement?a.parentElement():null},_getRange:function(a){var b,c;if(a.document.selection&&!j.opera)return a.document.selection.createRange();if(a.getSelection){b=a.getSelection();if(!b||b.rangeCount<1)return null;if(b.getRangeAt)c=b.getRangeAt(0);else c=a.document.createRange();return c}},_generateUniqueName:function(b){var a=Id[b];if(!a)a=0;Id[b]=++a;return b+a},_setContentEditable:function(b,d){var c="designMode",e="contentEditable";try{if(b.body[e])b.body[e]=d.toString();if(b[c])if(!d&&b[c]!=="off")b[c]="off";else if(d&&b[c]!=="on")b[c]="on";d&&!a.browser.msie&&b.execCommand("useCSS",false,true)}catch(f){}},_formatString:function(a,d){for(var c=a.length,b=0;b<d-c;b++)a="0"+a;return a},_convertToWebColor:function(c,b,a){var d=this,i,h,g,f;if(isNaN(c)||255-c<0)c=0;if(isNaN(b)||255-b<0)b=0;if(isNaN(a)||255-a<0)a=0;i=d._formatString(e(c).toString(16),2);h=d._formatString(e(b).toString(16),2);g=d._formatString(e(a).toString(16),2);f="#"+i+h+g;return f},_prepareLiteralRegexText:function(b){var a=b;a=a.replace("\\","\\\\");a=a.replace(".","\\.");a=a.replace("?","\\?");return a},_isNumeric:function(a){return new RegExp("^\\d+$").test(a)},_isEmail:function(a){return new RegExp("mailto:(\\S)+[@]{1}(\\S)+[.]{1}(\\w)+").test(a)},_isUrl:function(a){return new RegExp("[a-zA-z]+://[^s]+").test(a)},refresh:function(){var a=this,c=a.element,f=a._getHeader(),e=a._getFooter(),h=c.width(),g=c.height(),d=a._getContent(),b;a.editor.width(h).height(g);this.$ribbon.wijribbon("updateRibbonSize");b=a.editor.height()-f.outerHeight(true)-e.outerHeight(true);d.height(b).wijsplitter("refresh")},getText:function(){var a=this;return a._getDesignViewText()},setText:function(a){var b=this;a&&b._setDesignViewText(a)},localizeString:function(b,c){var a=this.options;return a.localization&&a.localization[b]?a.localization[b]:c}})})(jQuery);(function(a){"use strict";var d=document,b=parseInt,c="wijmo-wijeditor",e=c+"-colorcanvas",g=c+"-color",h=c+"-wheel",i=c+"-overlay",f=c+"-marker";a.fn.wijeditorcolorcanvas=function(c,b){a.wijeditorcolorcanvas(this,c,b);return this};a.wijeditorcolorcanvas=function(c,e,d){var b=a(c).get(0);return b.wijeditorcolorcanvas||(b.wijeditorcolorcanvas=new a._wijeditorcolorcanvas(b,e,d))};a._wijeditorcolorcanvas=function(l,n,o){var c=this,j="",k,m;m="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, ";j+="<div class='"+e+"'>";j+="<div class='"+g+"'></div>";j+="<div class='"+h+"'></div>";j+="<div class='"+i+"'></div>";j+="<div class='h-marker "+f+"'></div>";j+="<div class='sl-marker "+f+"'></div></div>";a(l).html(j);k=a("."+e,l);c.wheel=a("."+h,l).get(0);c.radius=84;c.square=100;c.width=194;a.browser.msie&&a.browser.version<7&&a("*",k).each(function(){var c=this,b=c.currentStyle.backgroundImage;if(b!=="none"){b=b.substring(5,b.length-2);a(c).css({backgroundImage:"none",filter:m+"src='"+b+"')"})}});c.linkTo=function(b){typeof c.callback==="object"&&a(c.callback).unbind("keyup",c.updateValue);c.color=null;if(typeof b==="function")c.callback=b;else if(typeof b==="object"||typeof b==="string"){c.callback=a(b);c.callback.bind("keyup",c.updateValue);c.callback.get(0).value&&c.setColor(c.callback.get(0).value)}return this};c.updateValue=function(){var a=this;a.value&&a.value!==c.color&&c.setColor(a.value)};c.setColor=function(a){var b=c.unpack(a);if(c.color!==a&&b){c.color=a;c.rgb=b;c.hsl=c.RGBToHSL(c.rgb);c.updateDisplay()}return this};c.setHSL=function(a){c.hsl=a;c.rgb=c.HSLToRGB(a);c.color=c.pack(c.rgb);c.updateDisplay();return this};c.widgetCoords=function(b){var f,g,h,e,d;h=b.target||b.srcElement;e=c.wheel;d=c.absolutePosition(e);f=(b.pageX||0*(b.clientX+a("html").get(0).scrollLeft))-d.x;g=(b.pageY||0*(b.clientY+a("html").get(0).scrollTop))-d.y;return{x:f-c.width/2,y:g-c.width/2}};c.mousedown=function(b){if(!d.dragging){a(d).bind("mousemove",c.mousemove).bind("mouseup",c.mouseup);d.dragging=true}var e=c.widgetCoords(b);c.circleDrag=Math.max(Math.abs(e.x),Math.abs(e.y))*2>c.square;c.mousemove(b);return false};c.mousemove=function(f){var b=c.widgetCoords(f),a,e,d;if(c.circleDrag){a=Math.atan2(b.x,-b.y)/6.28;if(a<0)a+=1;c.setHSL([a,c.hsl[1],c.hsl[2]])}else{e=Math.max(0,Math.min(1,-(b.x/c.square)+.5));d=Math.max(0,Math.min(1,-(b.y/c.square)+.5));c.setHSL([c.hsl[0],e,d])}return false};c.mouseup=function(){a(d).unbind("mousemove",c.mousemove).unbind("mouseup",c.mouseup);d.dragging=false};c.updateDisplay=function(){var d=c.hsl[0]*6.28,b;a(".h-marker",k).css({left:Math.round(Math.sin(d)*c.radius+c.width/2)+"px",top:Math.round(-Math.cos(d)*c.radius+c.width/2)+"px"});a(".sl-marker",k).css({left:Math.round(c.square*(.5-c.hsl[1])+c.width/2)+"px",top:Math.round(c.square*(.5-c.hsl[2])+c.width/2)+"px"});a("."+g,k).css("backgroundColor",c.pack(c.HSLToRGB([c.hsl[0],1,.5])));if(typeof c.callback==="object"){a(c.callback).css({backgroundColor:c.color,color:c.hsl[2]>.5?"#000":"#fff"});a(c.callback).each(function(){b=this;if(b.value&&b.value!==c.color)b.value=c.color})}else typeof c.callback==="function"&&c.callback.call(c,c.color)};c.absolutePosition=function(a){var d={x:a.offsetLeft,y:a.offsetTop},b;if(a.offsetParent){b=c.absolutePosition(a.offsetParent);d.x+=b.x;d.y+=b.y}return d};c.pack=function(a){var d=Math.round(a[0]*255),c,b;c=Math.round(a[1]*255);b=Math.round(a[2]*255);return"#"+(d<16?"0":"")+d.toString(16)+(c<16?"0":"")+c.toString(16)+(b<16?"0":"")+b.toString(16)};c.unpack=function(a){return a.length===7?[b("0x"+a.substring(1,3))/255,b("0x"+a.substring(3,5))/255,b("0x"+a.substring(5,7))/255]:a.length===4?[b("0x"+a.substring(1,2))/15,b("0x"+a.substring(2,3))/15,b("0x"+a.substring(3,4))/15]:void 0};c.HSLToRGB=function(g){var c,b,d,e,a,f=this;d=g[0];e=g[1];a=g[2];b=a<=.5?a*(e+1):a+e-a*e;c=a*2-b;return[f.hueToRGB(c,b,d+.33333),f.hueToRGB(c,b,d),f.hueToRGB(c,b,d-.33333)]};c.hueToRGB=function(b,c,a){a=a<0?a+1:a>1?a-1:a;return a*6<1?b+(c-b)*a*6:a*2<1?c:a*3<2?b+(c-b)*(.66666-a)*6:b};c.RGBToHSL=function(i){var h,a,f,g,j,d,e,c,b;e=i[0];c=i[1];b=i[2];h=Math.min(e,Math.min(c,b));a=Math.max(e,Math.max(c,b));f=a-h;d=(h+a)/2;j=0;if(d>0&&d<1)j=f/(d<.5?2*d:2-2*d);g=0;if(f>0){if(a===e&&a!==c)g+=(c-b)/f;if(a===c&&a!==b)g+=2+(b-e)/f;if(a===b&&a!==e)g+=4+(e-c)/f;g/=6}return[g,j,d]};a("*",k).mousedown(c.mousedown);c.setColor(o||"#000000");n&&c.linkTo(n)}})(jQuery);