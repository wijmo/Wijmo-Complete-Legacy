/*
 *
 * Wijmo Library 2.2.0
 * http://wijmo.com/
 *
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 * 
 * Dual licensed under the Wijmo Commercial or GNU GPL Version 3 licenses.
 * licensing@wijmo.com
 * http://wijmo.com/license
 *
 *
 **/
(function(a){"use strict";var h="ui-helper-clearfix",m="ui-widget-content",i="ui-corner-all",b="ui-state-disabled",c="ui-state-hover",n="ui-state-default",j="wijmo-wijgallery-",k=j+"button-",v=j+"button",s="ui-icon-triangle-1-e",u="ui-icon-triangle-1-w",d="ui-icon-play",e="ui-icon-pause",o="ui-widget-content ui-state-default wijmo-wijgallery-thumbs-pointer-{0}",f="wijmo-wijgallery-flashwrapper",q='<div class="wijmo-wijgallery-frame  ui-widget-content '+h+'"><div class="wijmo-wijgallery-content"></div></div>',p='<div class="wijmo-wijgallery-thumbs"></div>',r='<a class="ui-state-default"><span class="ui-icon"></span></a>',t='<div class="wijmo-wijgallery-frame-{0}"><a href="#" class="wijmo-wijgallery-frame-link"></a></div>',g='<div class="ui-widget-content '+h+'"></div>',l="li.wijmo-wijcarousel-item";a.widget("wijmo.wijgallery",{options:{autoPlay:false,scrollWithSelection:false,showTimer:true,interval:5e3,showCaption:true,data:[],showControls:false,control:"",controlPosition:{},showCounter:true,counter:"[i] of [n]",showPager:false,pagingPosition:{},thumbnailOrientation:"horizontal",thumbnailDirection:"after",transitions:{animated:"slide",duration:1e3,easing:null},showControlsOnHover:true,thumbsDisplay:5,thumbsLength:100,beforeTransition:null,afterTransition:null,loadCallback:null,showMovieControls:false,autoPlayMovies:true,flashParams:{bgcolor:"#000000",allowfullscreen:true,wmode:"transparent"},flashVars:{},flashVersion:"9.0.115",flvPlayer:"player\\player.swf",flashInstall:"player\\expressInstall.swf",mode:"img"},_setOption:function(c,d){var b=this,i=b.options,e,f,h,g;if(c==="framePosition"||c==="thumbnailPosition"||c==="transitions"||c==="pagingPosition")a.extend(true,i[c],d);else{h=i[c];a.Widget.prototype._setOption.apply(b,arguments);switch(c){case"disabled":b._handleDisabledOption(d,b.element);break;case"thumbnailOrientation":b.thumbs[b.thumbWidgetName]({orientation:d});break;case"thumbsDisplay":b.thumbs[b.thumbWidgetName]({display:d});break;case"autoPlay":b[d?"play":"pause"]();break;case"showCounter":case"showTimer":case"showControls":e=c.replace(/show/i,"").toLowerCase();f=c.replace(/show/i,"_create");if(d!==h)if(d===true)if(!b[e])b[f]();else b[e].jquery&&b[e].show();else b[e].hide();break;case"showCaption":if(d){b._createCaption(b.size);g=b._loadCaption(b.images[b.currentIdx]);g.show()}else b.element.find(".wijmo-wijgallery-caption,.wijmo-wijgallery-text").remove();break;case"showPager":case"thumbsLength":case"thumbnailDirection":case"showControlsOnHover":case"mode":case"data":b._destroy();b._create()}}},thumbWidgetName:"wijcarousel",_handleDisabledOption:function(c){var b=this;if(b.pager&&!b.pager.is(":hidden"))b.disabledEles=b.disabledEles.add(b.pager);if(c){!b.disabledDiv.length&&b._createDisabledDiv();b.disabledDiv.appendTo("body")}else if(b.disabledDiv){b.disabledDiv.remove();b.disabledDiv=a()}},_createDisabledDiv:function(){var b=this;b.disabledEles.each(function(){var d=a(this),e=d.offset(),g=d.outerWidth(),f=d.outerHeight(),c=a("<div></div>").addClass("ui-state-disabled").css({"z-index":"99999",position:"absolute",width:g,height:f,left:e.left,top:e.top});if(a.browser.msie){c.css("background-color","white");a.browser.version==="9.0"&&c.css("opacity","0.1")}b.disabledDiv=b.disabledDiv.add(c)})},_initLi:function(e){var d=e.children("a:eq(0)"),c=e.find("img:eq(0)"),f=e.find("span:eq(0)"),b={title:c.attr("alt"),caption:null};if(d.length&&d.attr("href")){b.url=d.attr("href");if(!b.title)b.title=d.attr("title")}else if(c.length)b.url=c.attr("src");if(f.length)b.caption=f;else if(c.attr("title"))b.caption=a("<span>").html(c.attr("title"));b.thumbUrl=c.attr("src");return b},_initStatus:function(){var b=this,c;b.images=[];b.ul=b.element.children("ul");c=b.ul.children("li");b.count=c.length;c.each(function(){var c=b._initLi(a(this));b.images.push(c)})},_createMarkupFromData:function(){var b=this,f=b.options,d=f.data,e=b.element,c=e.children("ul:eq(0)");b.images=d;if(c.length)c.empty();else c=a("<ul>").appendTo(e);b.ul=c;a.each(d,function(g,b){var e=a("<a>"),f=a("<li>"),d=a("<img>");b.url&&e.attr("href",b.url);b.thumbUrl&&d.attr("src",b.thumbUrl);b.title&&d.attr("alt");e.append(d).appendTo(f);f.appendTo(c)});b.count=d.length},_create:function(){var b=this,c=b.options;b.container=b.element;b.container.addClass("wijmo-wijgallery ui-widget");b.currentThumbIdx=0;b.currentIdx=-1;b.disabledEles=b.element;b.disabledDiv=a();if(window.wijmoApplyWijTouchUtilEvents)a=window.wijmoApplyWijTouchUtilEvents(a);if(c.showPager){c.pagingPosition=true;c.thumbnails=false}else c.thumbnails=true;if(c.data&&c.data.length)b._createMarkupFromData();else b._initStatus();c.loadCallback&&a.isFunction(c.loadCallback)&&b._trigger("loadCallback",null,b);b._createDom();c.autoPlay&&b.play();if(c.showControlsOnHover){b.frame.find(".wijmo-wijpager,.wijmo-wijgallery-button-next,.wijmo-wijgallery-counter,.wijmo-wijgallery-button-previous").hide();!b.isPlaying&&b.timer&&b.timer.hide()}c.disabled&&b.disable();b.element.is(":hidden")&&b.element.wijAddVisibilityObserver&&b.element.wijAddVisibilityObserver(function(){b.refresh();b.element.wijRemoveVisibilityObserver&&b.element.wijRemoveVisibilityObserver()},"wijgallery")},_createDom:function(){var a=this,b=a.options;if(b.thumbnails)a._createThumbnails();else a.ul.hide();a._createFrame();b.control&&a._createControls();b.showCounter&&a._createCounter();b.showTimer&&a._createTimer();b.showPager&&a._createPager()},_getFrameSize:function(){var a=this,d=a.options.thumbnailOrientation==="horizontal",b=a.element.height()-(d?a.thumbs?a.thumbs.outerHeight(true):0:0),c=a.element.width()-(d?0:a.thumbs?a.thumbs.outerWidth(true):0);return{w:c<2||!c?750:c,h:b<2||!b?300:b}},_createFrame:function(){var b=this,d=b.options,f,e,c=b._getFrameSize(),g=d.thumbnailDirection==="after";b.frame=a(q)[g?"prependTo":"appendTo"](b.container).setOutWidth(c.w-1).setOutHeight(c.h).wrap('<div class="wijmo-wijgallery-framewrapper">');b.size=c;f=b.frame.width();e=b.frame.height();b.frameWrapper=b.frame.parent();d.thumbnailOrientation==="vertical"&&b.frameWrapper.addClass("wijmo-wijgallery-framewrapper-vertical");d.showControlsOnHover&&b.frame.bind("mouseenter."+b.widgetName,function(){b._showControls("controls")}).bind("mouseleave."+b.widgetName,function(){b._hideControls("controls")});b.content=b.frame.children("div.wijmo-wijgallery-content");d.mode==="img"&&b._createFrameMask();b._createPrevNextBtn();b._createCaption(c);b._createLoading();b.last=a('<div class="ui-widget-overlay wijmo-wijgallery-last"></div>').appendTo(b.content).width(f).height(e).css({"line-height":c.h+"px"});b.current=a('<div class="ui-widget-overlay wijmo-wijgallery-current"></div>').appendTo(b.content).width(f).height(e).css({"line-height":c.h+"px"});b._show(0)},_createControls:function(){var b=this,c=b.options,d={collision:"none",of:b.container,my:"center bottom",at:"center bottom"};if(c.control){b.controls=a(c.control).css({position:"absolute"}).appendTo(b.container);a.extend(d,c.controlPosition);b.controls.position(d)}},_createLoading:function(){var b=this;b.loading=a("<div></div>").addClass("wijmo-wijgallery-loading").appendTo(b.content);b.loading.css({left:(b.content.width()-b.loading.width())/2,top:(b.content.height()-b.loading.height())/2});b.loading.hide()},_createFrameMask:function(){var b=this,c=b.options;a.each(["previous","next"],function(g,d){var e=a(t.replace(/\{0\}/,d)).appendTo(b.frame),f=e.children("a");c.showControlsOnHover&&e.bind("mouseenter."+b.widgetName,function(){b._showControls(d)}).bind("mouseleave."+b.widgetName,function(){b._hideControls(d)});f.bind("click."+b.widgetName,function(a){b[d]();a.preventDefault()})})},_createCounter:function(){var b=this,c=b.options;if(!c.showCounter){if(b.counter){b.counter.remove();b.counter=undefined}return}if(!b.counter)b.counter=a("<div></div>").addClass("wijmo-wijgallery-counter ui-state-default ui-corner-tl").appendTo(b.frame);b._refreshCounter()},_refreshCounter:function(){var b=this,d=b.options,c;if(!b.counter)return;b.counter.empty();if(d.counter){c=d.counter.replace(/\[i\]/,b.currentIdx+1);c=c.replace(/\[n\]/,b.count);a("<span></span>").text(c).appendTo(b.counter)}},_createPrevNextBtn:function(){var b=this;a.each(["next","previous"],function(f,c){var e=c==="next"?s:u,d;d=b.frame.find(".wijmo-wijgallery-frame-"+c);if(!d.length||b.options.mode!=="img")d=b.frame;b[c+"Btn"]=a(b._createBtn(k+c,e)).bind("click."+b.widgetName,a.proxy(b[c],b)).appendTo(d);b._applyBtnStyle(c)})},_applyBtnStyle:function(e){var a=this,f=e==="next",d=a[e+"Btn"],g=f?"right center":"left center",k=g,j="ui-corner-"+(f?"left":"right"),i=e==="next"?a.currentIdx>=a.count:a.currentIdx<=0,h={collision:"none",of:a.frame,my:k,at:g};d.addClass(j).position(h);if(i)d.removeClass(c).addClass(b);else d.hasClass(b)&&d.removeClass(b)},_createCaption:function(c){var b=this,d=b.options;if(d.showCaption){b.overlay=a(g).addClass("wijmo-wijgallery-caption").width(c.w).appendTo(b.content);b.caption=a(g).addClass("wijmo-wijgallery-text").width(c.w).appendTo(b.content)}},_loadCaption:function(g){var f=this,d=g.caption,e,c=a("<span></span>"),b=f.element.find(".wijmo-wijgallery-text,.wijmo-wijgallery-caption");if(d){b.show();d.jquery&&d.show();c.html(d);f.caption.empty().append(c);e=c.outerHeight(true);b.height(e);a.browser.msie&&b.height(c.css("display","block").outerHeight(true))}b.hide();return b},_showCaption:function(b){var a=this;if(b&&b.caption){a.caption.length&&a.caption.fadeIn(500);a.overlay.length&&a.overlay.show().animate({opacity:.5},500)}},_createTooltip:function(c){var b=this,d=c||"bottom";b.pointer=a("<div>").addClass(o.replace(/\{0\}/,d));b.pointer.appendTo(b.thumbsWrapper).hide()},_createThumbnails:function(){var b=this,d=b.options,h=d.thumbnailDirection==="after",g="wijmo-wijgallery-thumbs-{0}",e=d.thumbnailOrientation==="horizontal",f=h?e?"bottom":"right":e?"top":"left";b.thumbPosition=f;b.thumbs=a(p).appendTo(b.container).addClass(m).addClass(e?"wijmo-wijcarousel-horizontal-multi":"wijmo-wijcarousel-vertical-multi");if(e)b.thumbs.css({height:d.thumbsLength+"px"}).setOutWidth(b.element.width());else b.thumbs.css({width:d.thumbsLength+"px"}).setOutHeight(b.element.height());b.ul.appendTo(b.thumbs);b.ul.children("li").each(function(f){var c=a(this).children("a"),d=b.images[f],e=d.thumbUrl;if(!c.length){c=a(this).wrapInner("<a>").children("a");c.attr("href",e)}});if(a[b.namespace][b.thumbWidgetName]){b.thumbs.addClass(g.replace(/\{0\}/,f)).find("li").addClass(n).hover(function(){a(this).addClass(c)},function(){a(this).removeClass(c)});b.thumbsWrapper=b.thumbs[b.thumbWidgetName]({display:d.thumbsDisplay,step:d.thumbsDisplay-1,itemPadding:"0 10px",showCaption:false,orientation:d.thumbnailOrientation,loop:false,itemClick:function(a,d){var c=d.index;b.show(c);a.preventDefault()},afterScroll:function(c,a){b.currentThumbIdx=a.firstIndex;b.activeLi&&b.activeLi.is("li")&&b.activeLi.index()>=a.firstIndex&&b.activeLi.index()<=a.lastIndex&&b._highlightThumb(b.activeLi);b.isScrolling=false},beforeScroll:function(){b.isScrolling=true;if(d.mode==="swf"||d.mode==="flv")b.pointer.hide();else b.pointer.fadeOut(100)}}).wrap('<div class="wijmo-wijgallery-thumbswrapper">').parent();!e&&b.thumbsWrapper.addClass("wijmo-wijgallery-thumbswrapper-vertical");b._createTooltip(f)}},_calculatePosition:function(a,g,f,e,d,b){var c=this;if(c.thumbPosition==="bottom"){a.left=a.left+(e-g)/2+b;a.top=a.top-f}else if(c.thumbPosition==="top"){a.left=a.left+(e-g)/2+b;a.top=a.top+d+2*b}else if(c.thumbPosition==="left"){a.left=a.left+e+2*b;a.top=a.top+(d-f)/2+b}else if(c.thumbPosition==="right"){a.left=a.left-g;a.top=a.top+(d-f)/2+b}},_highlightThumb:function(a){var b=this,h,g,e,d,c,f;if(a&&a.length){a.siblings("li.wijmo-wijgallery-selected").removeClass("wijmo-wijgallery-selected ui-state-active");a.addClass("wijmo-wijgallery-selected ui-state-active");h=b.pointer.outerWidth(true);g=b.pointer.outerHeight(true);e=a.width();d=a.height();c=a.offset();f=5;b._calculatePosition(c,h,g,e,d,f);b.pointer.fadeIn(100);b.pointer.offset(c)}},_getSelector:function(b,e){var a,c=".wijmo-wijgallery-button-",d=".wijmo-wijpager,.wijmo-wijgallery-counter";if(e)d+=",.wijmo-wijgallery-timerbar";if(b==="next"||b==="previous")a=c+b;else if(b==="controls")a=d;else a=d+","+c+"next,"+c+"previous";return a},_showControls:function(d){var b=this,c;c=b._getSelector(d,!b.isPlaying&&b.timer);b.frame.find(c).stop(true,true).fadeIn(400,function(){a(this).css("opacity","")})},_hideControls:function(c){var a=this,b;b=a._getSelector(c,!a.isPlaying&&a.timer);this.frame.find(b).stop(true,true).fadeOut(600)},_createPager:function(){var b=this,f=b.options,d,c=f.thumbsDisplay,e=1,h=b.currentIdx,g=b.currentIdx,i={collision:"none",of:b.container,my:"right top",at:"right bottom"};if(f.thumbnails){d=a("<div></div>").appendTo(b.thumbs);if(c!==0){e=Math.ceil(b.count/c);h=Math.ceil(b.currentIdx/c)}b.pager=d.wijpager({pageCount:e,pageIndex:h,pageButtonCount:e,mode:"numeric",pageIndexChanged:function(d,e){var a=e.newPageIndex;(g<a*c||g>=(a+1)*c)&&b.thumbs[b.thumbWidgetName]("scrollTo",a*c);d.preventDefault()}}).css({position:"absolute"})}else{d=a("<div></div>").appendTo(b.container);b.pager=d.wijpager({pageCount:b.count,pageIndex:b.currentIdx,pageButtonCount:b.count,mode:"numeric",pageIndexChanged:function(d,c){var a=c.newPageIndex;b._show(a)}}).css({position:"absolute"});a.extend(i,f.pagingPosition);b.pager.addClass("wijmo-wijgallery-pager").position(i)}},_createBtn:function(f,e){var d=a(r);d.addClass(f).attr("role","button").bind("mouseover"+this.widgetName,function(){if(a(this).hasClass(b))return;a(this).addClass(c)}).bind("mouseout"+this.widgetName,function(){if(a(this).hasClass(b))return;a(this).removeClass(c)});d.children("span:eq(0)").addClass(e);return d},_createTimer:function(){var b=this;b._createPausePlay();b.progressBar=a("<div></div>").addClass("wijmo-wijgallery-timerbar-inner "+i).css({width:"0%"}).attr("role","progressbar");b.timer=a("<div></div>").addClass("wijmo-wijgallery-timerbar "+i).appendTo(b.frame).append(b.progressBar).append(b.playPauseBtn)},_createPausePlay:function(){var c=this,f=c.options;c.playPauseBtn=a(c._createBtn(v,f.autoPlay?e:d)).bind("click."+c.widgetName,function(){if(!a(this).hasClass(b)){var e=a(this).children("span:eq(0)");c[e.hasClass(d)?"play":"pause"]()}})},_show:function(c){var b=this,d=b.images[c],g,h,i,j=b._getFrameSize(),k=b.options,e=k.mode;if(b.currentIdx===c)return;if(d&&a.isPlainObject(d)){b.loading.delay(500).fadeIn(100);i=b.last.children("img,div."+f);i.length&&i.remove();if(e==="swf"||e==="flv"){b.last.hide();b.current.empty();b._wrapFlash(b.current,e,d.url);b.picture=b.current.children("div."+f);b._setCurrentStates(c);b.loading.stop().hide();b._thumbsScroll(c)}else if(e==="img"){b.picture&&b.picture.length&&b.last.append(b.picture.unbind("load"));b.current.hide();b.last.show();b.picture=a("<img>").attr({src:d.url,alt:d.title}).appendTo(b.current).data("itemIndex",c);if(b.picture[0].complete&&a.browser.msie)b._imageLoaded(b,j);else b.picture.bind("load",function(){b._imageLoaded(b,j)})}else if(e==="iframe"){if(b.current.is(":hidden")){g=b.current;h=b.last}else{g=b.last;h=b.current}b.picture=a("<iframe></iframe>").addClass("wijmo-wijgallery-iframe").attr({frameborder:"0",marginwidth:"0",marginheight:"0",scrolling:"auto",allowtransparency:"true",src:d.url}).hide().appendTo(g).data("itemIndex",c).bind("load",function(){var d=a(this),c=d.data("itemIndex");b.loading.stop().hide();b.pointer&&b.pointer.fadeOut(100);b._setCurrentStates(c);if(c!==undefined){d.show();h.fadeOut(function(){h.empty()});g.fadeIn()}})}}},_imageLoaded:function(a,c){var b=a.picture.attr("role","img"),d=b.data("itemIndex"),f=b[0].naturalWidth||b.width(),e=b[0].naturalHeight||b.height(),g=a.images[d];a.loading.stop().hide();a.pointer&&a.pointer.fadeOut(100);if(f>c.w||e>c.h)if(f/e>c.w/c.h)b.css({width:"100%"});else b.css({height:"100%"});else f<c.w&&e<c.h&&b.addClass("ui-state-default wijmo-wijgallery-small-image");if(d!==undefined){a.options.showCaption&&a.caption&&a._loadCaption(g);a._animate(d)}},_animate:function(d){var b=this,n=b.options,l=n.transitions,f=n.thumbnailOrientation==="horizontal",h,g,j,k,m,e,c=l.animated,i=l.duration;if(!b.last.children().length){b._setCurrentStates(d);b.last.hide();b.current.show();return}m={index:b.currentIdx,to:d,toImg:b.images[d]};if(!b._trigger("beforeTransition",null,m))return;if(c)if(c==="slide"){h=b.size.w;g=b.size.h;b.current.show();e=b.currentIdx>d?true:false;j=a.effects.createWrapper(b.last).css({overflow:"hidden",width:f?h*2:h,height:f?g:g*2,left:f?e?-h:0:0,top:f?0:e?-g:0});j[e?"prepend":"append"](b.current);j.animate({left:f?e?0:-h:0,top:f?0:e?0:-g},i,function(){b.last.parent().is(".ui-effects-wrapper")&&b.last.unwrap();b.last.hide();b._setCurrentStates(d)})}else if(c==="explode"||c==="scale"||c==="blind"||c==="fold"){b.current.css({position:"absolute"});b.current.stop(true,true).show(c,i,function(){b.last.hide();b._setCurrentStates(d)})}else if(c==="size"){b.last.hide();b.current.stop(true,true).show(c,i,function(){b.last.hide();b._setCurrentStates(d)})}else{k=i/2;b.last.hide(c,k,function(){b.last.hide();b.current.stop(true,true).show(c,k,function(){b._setCurrentStates(d)})})}else{b.last.hide();b.current.show();b._setCurrentStates(d)}b._thumbsScroll(d)},_thumbsScroll:function(b){var d,a=this,c=a.options;if(a.thumbs&&a.thumbs[a.thumbWidgetName])if(c.scrollWithSelection){d=b-Math.ceil(c.thumbsDisplay/2)+1;a.thumbs[a.thumbWidgetName]("scrollTo",d)}else if(b>c.thumbsDisplay+a.currentThumbIdx-1)a.thumbs[a.thumbWidgetName]("scrollTo",b-c.thumbsDisplay+1);else b<a.currentThumbIdx&&a.thumbs[a.thumbWidgetName]("scrollTo",b)},_setCurrentStates:function(d){var a=this,h=a.options,e,f,g;g=a.currentIdx;a.currentIdx=d;e=d+1<a.count;if(a.isPlaying&&e){a.timeout=null;a.isPlaying=false;a.play()}else a.progressBar&&a.pause();if(d+1>=a.count)a.nextBtn.add(a.playPauseBtn).removeClass(c).addClass(b);else a.nextBtn.add(a.playPauseBtn).removeClass(b);if(d<=0)a.previousBtn.removeClass(c).addClass(b);else a.previousBtn.removeClass(b);h.showCaption&&a._showCaption(a.images[d]);if(a.thumbs&&a.thumbs[a.thumbWidgetName]){a.activeLi=a.thumbs.find(l).eq(d);!a.isScrolling&&a._highlightThumb(a.activeLi)}else if(a.pager)a.pager.is(":wijmo-wijpager")&&a.pager.wijpager("option","pageIndex",d);a._refreshCounter();a._clearCss();f={last:g,index:a.currentIdx,toImg:a.images[a.currentIdx]};a._trigger("afterTransition",null,f)},_clearCss:function(){this.current.css({position:"",visibility:""})},_resetState:function(){var a=this;a._stopAnimation();if(a.isPlaying&&a.progressBar){a.progressBar.stop();a.progressBar.css({width:"0%"})}},_stopAnimation:function(){var b=this,a;a=b.content.find(".ui-effects-wrapper");a.length&&a.stop(true,true);b.current.stop(true,true);b.last.stop(true,true)},widget:function(){return this.element},count:function(){return this.count},_destroy:function(){var b=this;b.frame.unwrap().remove();if(b.options.thumbnails){if(a[b.namespace][b.thumbWidgetName]){b.thumbs[b.thumbWidgetName]("destroy");b.element.find("li").unbind().removeClass("ui-state-active").filter(".wijmo-wijgallery-selected").removeClass("wijmo-wijgallery-selected");b.thumbs.children("ul").unwrap().unwrap()}}else{b.pager&&b.pager.length&&b.pager.remove();b.element.find("ul").css({display:""})}b.pointer&&b.pointer.remove();b.element.removeClass("wijmo-wijgallery ui-widget ui-widget-content ui-corner-all");if(b.disabledDiv){b.disabledDiv.remove();b.disabledDiv=null}},destroy:function(){this._destroy();a.Widget.prototype.destroy.apply(this)},show:function(b){var a=this;a._resetState();a._show(b)},next:function(){var a=this,b;a._resetState();b=a.currentIdx+1;b<a.count&&a._show(b)},previous:function(){var a=this,b;a._resetState();b=a.currentIdx-1;b>=0&&a._show(b)},play:function(){var a=this,b=a.options;if(a.isPlaying)return;if(b.interval===0)return a.pause();if(b.showTimer&&a.progressBar){a.progressBar.css({width:"0%"});a.playPauseBtn.children("span:eq(0)").removeClass(d).addClass(e);a.progressBar.animate({width:"100%"},b.interval,function(){a._show(a.currentIdx+1)})}else{if(a.timeout)return;a.timeout=window.setTimeout(function(){a.next()},b.interval)}a.isPlaying=true},pause:function(){var a=this,b=a.options;if(b.showTimer&&a.progressBar){a.progressBar.stop();a.progressBar.css({width:"0%"});a.playPauseBtn.children("span:eq(0)").removeClass(e).addClass(d)}else{if(a.timeout===null)return;window.clearTimeout(a.timeout);a.timeout=null}a.isPlaying=false},add:function(c,d){var b=this,e,g,f;if(typeof c==="string"){e=a(c);f=b._initLi(e)}else if(c.jquery){e=c;f=b._initLi(e)}else if(a.isPlainObject(c))f=c;else return;if(!d||d>b.count)g=b.count;else if(d<0)g=0;else g=d;b.images.splice(g,0,f);b.count++;b.thumbs&&b.thumbs[b.thumbWidgetName]&&b.thumbs[b.thumbWidgetName]("add",e,d)},remove:function(b){var a=this,c;if(!b||b>a.count)c=a.count;else if(b<0)c=0;else c=b;a.images.splice(c,1);a.count--;a.thumbs&&a.thumbs[a.thumbWidgetName]&&a.thumbs[a.thumbWidgetName]("remove",b)},_getExt:function(a){var c,b,e=/[0-9a-z]+$/i,d=a.indexOf("?");if(d>-1)a=a.substring(0,d);b=a.match(e);if(b)c=b[0].toLowerCase();return c},_getPlayerName:function(c){if(c.indexOf("#")===0||c.indexOf("#")>0&&c.indexOf(document.location.href)===0)return"inline";var e=["bmp","gif","jpg","jpeg","png"],f=["swf"],d=["flv","m4v"],h=["dv","mov","moov","movie","mp4","avi","mpg","mpeg"],g=["asf","avi","mpg","mpeg","wm","wmv"],b=this._getExt(c);if(b){if(a.inArray(b,e)>=0)return"img";if(a.inArray(b,f)>=0)return"swf";if(a.inArray(b,d)>=0)return"flv";if(a.inArray(b,g)>=0)return"wmp";if(a.inArray(b,h)>=0)return"qt"}return"unknown"},_wrapFlash:function(m,p,k){var i=this,b=i.options,j=k,d,h="100%",e="100%",n=b.flashInstall,o=b.flashVersion,c=b.flashVars,g=b.flashParams,l=i._newId();if(p==="flv"){j=b.flvPlayer;c=a.extend({file:k,width:h,height:e,autostart:b.autoPlayMovies?"true":"false",controlbar:b.showMovieControls?"bottom":"none",backcolor:"0x000000",frontcolor:"0xCCCCCC",lightcolor:"0x557722"},b.flashVars);g=a.extend({autostart:b.autoPlayMovies?"true":"false",allowscriptaccess:"always"},b.flashParams)}d=a("<div/>").addClass(f).appendTo(m);a("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).attr("id",l).appendTo(d);S.flash.embedSWF(j,l,h,e,o,n,c,g)},_newId:function(){var d="a|b|c|d|e|f|g|h|i|j|k|l|m|n|o|p|q|r|s|t|u|v|w|x|y|z",b=[],c="",a;b=d.split("|");for(a=0;a<16;a++)c+=b[Math.round(Math.random()*25)];return c}})})(jQuery);